(()=>{"use strict";var e={30:(e,t,a)=>{var i=a(751),s=a(641);const o={id:"app"};function n(e,t,a,i,n,r){const l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(l)])}const r={name:"App"};var l=a(262);const d=(0,l.A)(r,[["render",n]]),c=d;var h=a(499),u=a(33);const p={class:"auth-container"},g={class:"auth-card"},m={class:"form-group"},k={key:0,class:"form-group"},v=["required"],y={key:1,class:"form-group"},f=["required"],b={class:"form-group"},C={key:2,class:"error-message"},w=["disabled"],L={class:"auth-footer"};function T(e,t,a,o,n,r){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",g,[t[13]||(t[13]=(0,s.Fv)('<div class="auth-header" data-v-3d5c52f4><div class="logo-container" data-v-3d5c52f4><svg class="logo-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-3d5c52f4><defs data-v-3d5c52f4><linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-3d5c52f4><stop offset="0%" style="stop-color:var(--color-primary);stop-opacity:1;" data-v-3d5c52f4></stop><stop offset="100%" style="stop-color:var(--color-primaryDark);stop-opacity:1;" data-v-3d5c52f4></stop></linearGradient></defs><circle cx="30" cy="50" r="25" fill="url(#logoGradient)" opacity="0.8" data-v-3d5c52f4></circle><circle cx="70" cy="50" r="25" fill="url(#logoGradient)" opacity="0.8" data-v-3d5c52f4></circle><path d="M 30 35 Q 50 20 70 35" stroke="var(--color-primaryLight)" stroke-width="4" fill="none" stroke-linecap="round" data-v-3d5c52f4></path><circle cx="30" cy="45" r="4" fill="white" data-v-3d5c52f4></circle><circle cx="70" cy="45" r="4" fill="white" data-v-3d5c52f4></circle><path d="M 20 55 Q 30 65 40 55" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" data-v-3d5c52f4></path><path d="M 60 55 Q 70 65 80 55" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" data-v-3d5c52f4></path></svg><h1 data-v-3d5c52f4>PingMe</h1></div><p data-v-3d5c52f4>Zaloguj siÄ™ do swojego konta</p></div>',1)),(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,i.D$)((...e)=>r.handleLogin&&r.handleLogin(...e),["prevent"])),class:"auth-form"},[(0,s.Lk)("div",m,[(0,s.Lk)("label",null,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>n.loginType=e),value:"email"},null,512),[[i.XL,n.loginType]]),t[6]||(t[6]=(0,s.eW)(" Logowanie emailem ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>n.loginType=e),value:"username",style:{"margin-left":"15px"}},null,512),[[i.XL,n.loginType]]),t[7]||(t[7]=(0,s.eW)(" Logowanie nazwÄ… ",-1))])]),"email"===n.loginType?((0,s.uX)(),(0,s.CE)("div",k,[t[8]||(t[8]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>n.email=e),type:"email",placeholder:"WprowadÅº swÃ³j email",required:"email"===n.loginType},null,8,v),[[i.Jo,n.email]])])):(0,s.Q3)("",!0),"username"===n.loginType?((0,s.uX)(),(0,s.CE)("div",y,[t[9]||(t[9]=(0,s.Lk)("label",{for:"username"},"Nazwa uÅ¼ytkownika",-1)),(0,s.bo)((0,s.Lk)("input",{id:"username","onUpdate:modelValue":t[3]||(t[3]=e=>n.username=e),type:"text",placeholder:"WprowadÅº swojÄ… nazwÄ™ uÅ¼ytkownika",required:"username"===n.loginType},null,8,f),[[i.Jo,n.username]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",b,[t[10]||(t[10]=(0,s.Lk)("label",{for:"password"},"HasÅ‚o",-1)),(0,s.bo)((0,s.Lk)("input",{id:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.password=e),type:"password",placeholder:"WprowadÅº hasÅ‚o",required:""},null,512),[[i.Jo,n.password]])]),n.error?((0,s.uX)(),(0,s.CE)("div",C,(0,u.v_)(n.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("button",{type:"submit",class:"submit-btn",disabled:n.loading},(0,u.v_)(n.loading?"Logowanie...":"Zaloguj siÄ™"),9,w)],32),(0,s.Lk)("div",L,[(0,s.Lk)("p",null,[t[12]||(t[12]=(0,s.eW)("Nie masz konta? ",-1)),(0,s.bF)(l,{to:"/register"},{default:(0,s.k6)(()=>[...t[11]||(t[11]=[(0,s.eW)("Zarejestruj siÄ™",-1)])]),_:1})])])]),t[14]||(t[14]=(0,s.Fv)('<footer class="page-footer" data-v-3d5c52f4><div class="footer-content" data-v-3d5c52f4><a href="mailto:kontakt@test.com" class="footer-link" data-v-3d5c52f4><div class="icon-wrapper" data-v-3d5c52f4><svg class="envelope-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3d5c52f4><rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2" data-v-3d5c52f4></rect><path d="M3 7L12 13L21 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-3d5c52f4></path></svg><span class="icon-letter" data-v-3d5c52f4>i</span></div><span data-v-3d5c52f4>kontakt@test.com</span></a><a href="tel:123213321" class="footer-link" data-v-3d5c52f4><svg class="phone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3d5c52f4><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3d5c52f4></path></svg><span data-v-3d5c52f4>123-213-321</span></a></div></footer>',1))])}const E={darkModern:{name:"Dark Modern",icon:"ðŸŒ™",description:"Nowoczesny ciemny motyw",class:"dark-modern",colors:{primary:"#3b82f6",primaryDark:"#2563eb",primaryLight:"#60a5fa",primaryLighter:"#93c5fd",background1:"#0f172a",background2:"#1e293b",background3:"#020617",cardBg:"rgba(30, 41, 59, 0.8)",border:"rgba(71, 85, 105, 0.5)",text:"#f1f5f9",textLight:"#94a3b8",success:"#10b981",error:"#ef4444"}},lightModern:{name:"Light Modern",icon:"â˜€ï¸",description:"Minimalistyczny jasny motyw",class:"light-modern",colors:{primary:"#3b82f6",primaryDark:"#2563eb",primaryLight:"#60a5fa",primaryLighter:"#93c5fd",background1:"#ffffff",background2:"#f8fafc",background3:"#f1f5f9",cardBg:"rgba(255, 255, 255, 0.9)",border:"rgba(226, 232, 240, 0.8)",text:"#0f172a",textLight:"#64748b",success:"#10b981",error:"#ef4444"}},feminine:{name:"Feminine Garden",icon:"ðŸŒ¸",description:"Delikatny jasny motyw z kwiatkami",class:"feminine",colors:{primary:"#ec4899",primaryDark:"#db2777",primaryLight:"#f472b6",primaryLighter:"#f9a8d4",background1:"#fef3f8",background2:"#fce7f3",background3:"#f5d0fe",cardBg:"rgba(255, 255, 255, 0.95)",border:"rgba(249, 168, 212, 0.4)",text:"#831843",textLight:"#9f1239",success:"#ec4899",error:"#be123c"}},darkFeminine:{name:"Dark Floral Night",icon:"ðŸŒº",description:"Ciemny kobiecy motyw z mnÃ³stwem kwiatkÃ³w",class:"dark-feminine",colors:{primary:"#f472b6",primaryDark:"#ec4899",primaryLight:"#f9a8d4",primaryLighter:"#fbcfe8",background1:"#1a0a14",background2:"#2d1b2e",background3:"#0f0511",cardBg:"rgba(45, 27, 46, 0.9)",border:"rgba(236, 72, 153, 0.3)",text:"#fce7f3",textLight:"#f9a8d4",success:"#f472b6",error:"#fb7185"}}},M=["ðŸ¦","ðŸ¯","ðŸ¦Š","ðŸ¼","ðŸ¨","ðŸ¸","ðŸ¦„","ðŸ¦‹","ðŸ™","ðŸ¦€","ðŸ¬","ðŸ¦…","ðŸŒŸ","ðŸ”¥","âš¡","ðŸŒˆ","ðŸŽ¨","ðŸŽ­","ðŸŽ®","ðŸŽ¸","ðŸŽ¯","ðŸš€","ðŸŒ™","â˜€ï¸"];function x(e){const t=E[e];if(!t)return;const a=document.documentElement;Object.values(E).forEach(e=>{a.classList.remove(e.class)}),a.classList.add(t.class),Object.entries(t.colors).forEach(([e,t])=>{a.style.setProperty(`--color-${e}`,t)})}function z(e){const t={small:"text-sm",medium:"text-base",large:"text-lg"};return t[e]||t.medium}const I={name:"Login",data(){return{email:"",username:"",password:"",error:"",loading:!1,loginType:"email",apiUrl:"http://localhost:8000/api"}},mounted(){const e=localStorage.getItem("theme")||"purpleDream";x(e);const t=localStorage.getItem("textSize")||"medium";document.body.classList.add(z(t))},methods:{async handleLogin(){this.error="",this.loading=!0;try{const e={password:this.password};"email"===this.loginType?e.email=this.email:e.username=this.username;const t=await fetch(`${this.apiUrl}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();t.ok?(localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("userIp",a.ip),localStorage.setItem("loginTime",(new Date).toISOString()),localStorage.setItem("lastActivity",(new Date).toISOString()),this.$router.push("/dashboard")):this.error=a.error||"BÅ‚Ä…d logowania"}catch(e){console.error("Login error:",e),this.error="WystÄ…piÅ‚ bÅ‚Ä…d podczas logowania"}finally{this.loading=!1}}}},j=(0,l.A)(I,[["render",T],["__scopeId","data-v-3d5c52f4"]]),S=j,U={class:"auth-container"},D={class:"auth-card"},F={class:"form-group"},P={class:"form-group"},A={class:"form-group"},X={class:"form-group"},$={key:0,class:"error-message"},_={key:1,class:"success-message"},G=["disabled"],O={class:"auth-footer"};function N(e,t,a,o,n,r){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",U,[(0,s.Lk)("div",D,[t[11]||(t[11]=(0,s.Fv)('<div class="auth-header" data-v-66799b14><div class="logo-container" data-v-66799b14><svg class="logo-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-66799b14><defs data-v-66799b14><linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-66799b14><stop offset="0%" style="stop-color:var(--color-primary);stop-opacity:1;" data-v-66799b14></stop><stop offset="100%" style="stop-color:var(--color-primaryDark);stop-opacity:1;" data-v-66799b14></stop></linearGradient></defs><circle cx="30" cy="50" r="25" fill="url(#logoGradient)" opacity="0.8" data-v-66799b14></circle><circle cx="70" cy="50" r="25" fill="url(#logoGradient)" opacity="0.8" data-v-66799b14></circle><path d="M 30 35 Q 50 20 70 35" stroke="var(--color-primaryLight)" stroke-width="4" fill="none" stroke-linecap="round" data-v-66799b14></path><circle cx="30" cy="45" r="4" fill="white" data-v-66799b14></circle><circle cx="70" cy="45" r="4" fill="white" data-v-66799b14></circle><path d="M 20 55 Q 30 65 40 55" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" data-v-66799b14></path><path d="M 60 55 Q 70 65 80 55" stroke="white" stroke-width="3" fill="none" stroke-linecap="round" data-v-66799b14></path></svg><h1 data-v-66799b14>PingMe</h1></div><p data-v-66799b14>UtwÃ³rz nowe konto</p></div>',1)),(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,i.D$)((...e)=>r.handleRegister&&r.handleRegister(...e),["prevent"])),class:"auth-form"},[(0,s.Lk)("div",F,[t[5]||(t[5]=(0,s.Lk)("label",{for:"username"},"Nazwa uÅ¼ytkownika",-1)),(0,s.bo)((0,s.Lk)("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),type:"text",placeholder:"Wybierz nazwÄ™ uÅ¼ytkownika",required:""},null,512),[[i.Jo,n.username]])]),(0,s.Lk)("div",P,[t[6]||(t[6]=(0,s.Lk)("label",{for:"email"},"Email",-1)),(0,s.bo)((0,s.Lk)("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),type:"email",placeholder:"WprowadÅº swÃ³j email",required:""},null,512),[[i.Jo,n.email]])]),(0,s.Lk)("div",A,[t[7]||(t[7]=(0,s.Lk)("label",{for:"password"},"HasÅ‚o",-1)),(0,s.bo)((0,s.Lk)("input",{id:"password","onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),type:"password",placeholder:"Wybierz hasÅ‚o",required:""},null,512),[[i.Jo,n.password]])]),(0,s.Lk)("div",X,[t[8]||(t[8]=(0,s.Lk)("label",{for:"confirmPassword"},"PotwierdÅº hasÅ‚o",-1)),(0,s.bo)((0,s.Lk)("input",{id:"confirmPassword","onUpdate:modelValue":t[3]||(t[3]=e=>n.confirmPassword=e),type:"password",placeholder:"PotwierdÅº hasÅ‚o",required:""},null,512),[[i.Jo,n.confirmPassword]])]),n.error?((0,s.uX)(),(0,s.CE)("div",$,(0,u.v_)(n.error),1)):(0,s.Q3)("",!0),n.success?((0,s.uX)(),(0,s.CE)("div",_,(0,u.v_)(n.success),1)):(0,s.Q3)("",!0),(0,s.Lk)("button",{type:"submit",class:"submit-btn",disabled:n.loading},(0,u.v_)(n.loading?"Rejestracja...":"Zarejestruj siÄ™"),9,G)],32),(0,s.Lk)("div",O,[(0,s.Lk)("p",null,[t[10]||(t[10]=(0,s.eW)("Masz juÅ¼ konto? ",-1)),(0,s.bF)(l,{to:"/login"},{default:(0,s.k6)(()=>[...t[9]||(t[9]=[(0,s.eW)("Zaloguj siÄ™",-1)])]),_:1})])])]),t[12]||(t[12]=(0,s.Fv)('<footer class="page-footer" data-v-66799b14><div class="footer-content" data-v-66799b14><a href="mailto:kontakt@test.com" class="footer-link" data-v-66799b14><div class="icon-wrapper" data-v-66799b14><svg class="envelope-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-66799b14><rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2" data-v-66799b14></rect><path d="M3 7L12 13L21 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-66799b14></path></svg><span class="icon-letter" data-v-66799b14>i</span></div><span data-v-66799b14>kontakt@test.com</span></a><a href="tel:123213321" class="footer-link" data-v-66799b14><svg class="phone-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-66799b14><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-66799b14></path></svg><span data-v-66799b14>123-213-321</span></a></div></footer>',1))])}const B={name:"Register",data(){return{username:"",email:"",password:"",confirmPassword:"",error:"",success:"",loading:!1,apiUrl:"http://localhost:8000/api"}},mounted(){const e=localStorage.getItem("theme")||"purpleDream";x(e);const t=localStorage.getItem("textSize")||"medium";document.body.classList.add(z(t))},methods:{async handleRegister(){if(this.error="",this.success="",this.password===this.confirmPassword)if(this.password.length<6)this.error="HasÅ‚o musi mieÄ‡ co najmniej 6 znakÃ³w";else{this.loading=!0;try{const e=await fetch(`${this.apiUrl}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,email:this.email,password:this.password})}),t=await e.json();e.ok?(this.success="Rejestracja zakoÅ„czona pomyÅ›lnie! Przekierowywanie...",setTimeout(()=>{this.$router.push("/login")},2e3)):this.error=t.error||"BÅ‚Ä…d rejestracji"}catch(e){console.error("Registration error:",e),this.error="WystÄ…piÅ‚ bÅ‚Ä…d podczas rejestracji"}finally{this.loading=!1}}else this.error="HasÅ‚a nie sÄ… identyczne"}}},Q=(0,l.A)(B,[["render",N],["__scopeId","data-v-66799b14"]]),R=Q,W={class:"flex items-center justify-between p-4"},J={class:"flex items-center gap-3"},K={class:"flex items-center gap-3 mb-4 animate-fade-in"},V={class:"text-center"},Z={class:"flex-1 min-w-0"},q={class:"p-4 space-y-2 flex-1 overflow-y-auto"},H=["onClick"],Y={class:"text-xl"},ee={class:"flex-1 text-left"},te={key:0,class:"px-2 py-1 text-xs rounded-full bg-red-500 text-white"},ae={class:"lg:ml-72 h-screen overflow-y-auto pt-20 lg:pt-0"},ie={class:"p-6"},se={key:0,class:"home-panel"},oe={class:"welcome-card"},ne={class:"welcome-title"},re={class:"quick-actions"},le={key:0,class:"info-panel"},de={key:0},ce={key:0},he={key:0},ue={key:0},pe={key:0},ge={class:"flex items-center justify-between max-w-screen-xl mx-auto"},me={class:"flex items-center gap-4"};function ke(e,t,a,o,n,r){const l=(0,s.g2)("Friends"),d=(0,s.g2)("Events"),c=(0,s.g2)("Gallery"),h=(0,s.g2)("Settings"),p=(0,s.g2)("ChatRoom");return(0,s.uX)(),(0,s.CE)("div",{class:(0,u.C4)(["min-h-screen max-h-screen overflow-hidden transition-colors duration-300",r.getBgClass()])},[(0,s.Lk)("div",{class:(0,u.C4)(["lg:hidden fixed top-0 left-0 right-0 z-50 backdrop-blur-lg border-b",r.getCardClass()])},[(0,s.Lk)("div",W,[(0,s.Lk)("div",J,[(0,s.Lk)("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold",style:(0,u.Tr)(r.getAvatarBgStyle())},(0,u.v_)(n.userAvatar),5),(0,s.Lk)("span",{class:(0,u.C4)(["font-semibold",r.getTextClass()])},(0,u.v_)(n.currentUser?.username),3)]),(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>n.mobileMenuOpen=!n.mobileMenuOpen),class:(0,u.C4)(["p-2 rounded-lg hover:bg-opacity-10 transition-colors",r.getHoverClass()])},[...t[7]||(t[7]=[(0,s.Lk)("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])],2)])],2),(0,s.Lk)("aside",{class:(0,u.C4)(["fixed left-0 top-0 bottom-0 w-72 backdrop-blur-lg border-r transition-transform duration-300 z-40",[r.getCardClass(),n.mobileMenuOpen?"translate-x-0":"-translate-x-full lg:translate-x-0"]])},[(0,s.Lk)("div",{class:(0,u.C4)(["p-6 border-b",r.getBorderClass()])},[(0,s.Lk)("div",K,[(0,s.Lk)("div",{class:(0,u.C4)(["w-12 h-12 rounded-xl flex items-center justify-center shadow-lg border-2 border-black",r.getLogoBgClass()])},[...t[8]||(t[8]=[(0,s.Lk)("span",{class:"text-2xl"},"ðŸ’¬",-1)])],2),(0,s.Lk)("h1",{class:(0,u.C4)(["text-2xl font-bold",r.getLogoTextClass()])}," PingMe ",2)]),(0,s.Lk)("div",{class:(0,u.C4)(["clock-widget p-3 rounded-lg mb-3",r.getCardClass()])},[(0,s.Lk)("div",V,[(0,s.Lk)("div",{class:(0,u.C4)(["text-lg font-bold",r.getTextClass()])},(0,u.v_)(n.currentTime),3),(0,s.Lk)("div",{class:(0,u.C4)(["text-xs",r.getTextMutedClass()])},(0,u.v_)(n.currentDate),3)])],2),(0,s.Lk)("div",{class:(0,u.C4)(["flex items-center gap-3 p-3 rounded-lg",r.getHoverClass()])},[(0,s.Lk)("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold shadow",style:(0,u.Tr)(r.getAvatarBgStyle())},(0,u.v_)(n.userAvatar),5),(0,s.Lk)("div",Z,[(0,s.Lk)("p",{class:(0,u.C4)(["font-semibold truncate",r.getTextClass()])},(0,u.v_)(n.currentUser?.username),3),(0,s.Lk)("p",{class:(0,u.C4)(["text-xs truncate",r.getTextMutedClass()])},"Online",2)])],2)],2),(0,s.Lk)("nav",q,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.tabs,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.id,onClick:t=>r.switchTab(e.id),class:(0,u.C4)(["w-full flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all duration-200 group animate-slide-up",n.activeTab===e.id?r.getActiveNavClass():r.getInactiveNavClass()])},[(0,s.Lk)("span",Y,(0,u.v_)(e.icon),1),(0,s.Lk)("span",ee,(0,u.v_)(e.label),1),e.badge?((0,s.uX)(),(0,s.CE)("span",te,(0,u.v_)(e.badge),1)):(0,s.Q3)("",!0)],10,H))),128))]),(0,s.Lk)("div",{class:(0,u.C4)(["p-4 border-t",r.getBorderClass()])},[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.handleLogout&&r.handleLogout(...e)),class:(0,u.C4)(["w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all duration-200 hover:scale-105",r.getLogoutButtonClass()])},[...t[9]||(t[9]=[(0,s.Lk)("span",null,"ðŸšª",-1),(0,s.Lk)("span",null,"Wyloguj siÄ™",-1)])],2)],2)],2),(0,s.Lk)("main",ae,[(0,s.Lk)("div",ie,[(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["home"===n.activeTab?((0,s.uX)(),(0,s.CE)("div",se,[(0,s.Lk)("div",oe,[(0,s.Lk)("h1",ne,"ðŸ‘‹ Witaj, "+(0,u.v_)(n.currentUser?.username)+"!",1),t[10]||(t[10]=(0,s.Lk)("p",{class:"welcome-subtitle"},"Co chcesz dzisiaj zrobiÄ‡?",-1))]),(0,s.Lk)("div",re,[(0,s.Lk)("div",{class:"action-card",onClick:t[2]||(t[2]=e=>r.switchTab("friends"))},[...t[11]||(t[11]=[(0,s.Lk)("div",{class:"action-icon"},"ðŸ‘¥",-1),(0,s.Lk)("h3",null,"Znajomi",-1),(0,s.Lk)("p",null,"Czatuj ze znajomymi",-1)])]),(0,s.Lk)("div",{class:"action-card",onClick:t[3]||(t[3]=e=>r.switchTab("events"))},[...t[12]||(t[12]=[(0,s.Lk)("div",{class:"action-icon"},"ðŸ“…",-1),(0,s.Lk)("h3",null,"Wydarzenia",-1),(0,s.Lk)("p",null,"Planuj spotkania",-1)])]),(0,s.Lk)("div",{class:"action-card",onClick:t[4]||(t[4]=e=>r.switchTab("gallery"))},[...t[13]||(t[13]=[(0,s.Lk)("div",{class:"action-icon"},"ðŸ–¼ï¸",-1),(0,s.Lk)("h3",null,"Galeria",-1),(0,s.Lk)("p",null,"Dziel siÄ™ zdjÄ™ciami",-1)])]),(0,s.Lk)("div",{class:"action-card",onClick:t[5]||(t[5]=e=>r.switchTab("settings"))},[...t[14]||(t[14]=[(0,s.Lk)("div",{class:"action-icon"},"âš™ï¸",-1),(0,s.Lk)("h3",null,"Ustawienia",-1),(0,s.Lk)("p",null,"Personalizuj aplikacjÄ™",-1)])])])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["info"===n.activeTab?((0,s.uX)(),(0,s.CE)("div",le,[...t[15]||(t[15]=[(0,s.Lk)("h1",{class:"info-title"},"â„¹ï¸ Informacje o PingMe",-1),(0,s.Lk)("div",{class:"info-section"},[(0,s.Lk)("h2",null,"ðŸ“‹ FunkcjonalnoÅ›ci"),(0,s.Lk)("ul",{class:"info-list"},[(0,s.Lk)("li",null,"ðŸ’¬ Chat w czasie rzeczywistym z przesyÅ‚aniem plikÃ³w"),(0,s.Lk)("li",null,"ðŸ‘¥ ZarzÄ…dzanie znajomymi i niestandardowe pseudonimy"),(0,s.Lk)("li",null,"ðŸ–¼ï¸ Galeria zdjÄ™Ä‡ i wideo (JPG, PNG, MP4, GIF)"),(0,s.Lk)("li",null,"ðŸ“… Kalendarz wydarzeÅ„ i lista zadaÅ„ To-Do"),(0,s.Lk)("li",null,"ðŸ˜„ GIF picker z integracjÄ… Giphy"),(0,s.Lk)("li",null,"â¤ï¸ Reakcje emoji na wiadomoÅ›ci"),(0,s.Lk)("li",null,"âœï¸ Edycja i usuwanie wiadomoÅ›ci"),(0,s.Lk)("li",null,"ðŸŽ¨ 4 motywy kolorystyczne (Dark Modern, Light Modern, Feminine Garden, Dark Floral Night)"),(0,s.Lk)("li",null,"ðŸŽ­ Personalizacja avatara (24 emoji + 7 kolorÃ³w tÅ‚a)"),(0,s.Lk)("li",null,"ðŸ“± Responsive design (mobile & desktop)")])],-1),(0,s.Lk)("div",{class:"info-section"},[(0,s.Lk)("h2",null,"ðŸ› ï¸ Technologie"),(0,s.Lk)("div",{class:"tech-columns"},[(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"Frontend:"),(0,s.Lk)("ul",{class:"tech-list"},[(0,s.Lk)("li",null,"Vue.js 3"),(0,s.Lk)("li",null,"Tailwind CSS"),(0,s.Lk)("li",null,"Vue Router"),(0,s.Lk)("li",null,"Giphy API")])]),(0,s.Lk)("div",null,[(0,s.Lk)("h3",null,"Backend:"),(0,s.Lk)("ul",{class:"tech-list"},[(0,s.Lk)("li",null,"Symfony 6"),(0,s.Lk)("li",null,"Doctrine ORM"),(0,s.Lk)("li",null,"MySQL/SQLite"),(0,s.Lk)("li",null,"REST API")])])])],-1),(0,s.Lk)("div",{class:"info-section"},[(0,s.Lk)("h2",null,"ðŸ“Š Statystyki projektu"),(0,s.Lk)("div",{class:"stats-grid"},[(0,s.Lk)("div",{class:"stat-card"},[(0,s.Lk)("div",{class:"stat-value"},"6"),(0,s.Lk)("div",{class:"stat-label"},"GÅ‚Ã³wnych sekcji")]),(0,s.Lk)("div",{class:"stat-card"},[(0,s.Lk)("div",{class:"stat-value"},"4"),(0,s.Lk)("div",{class:"stat-label"},"Motywy")]),(0,s.Lk)("div",{class:"stat-card"},[(0,s.Lk)("div",{class:"stat-value"},"10+"),(0,s.Lk)("div",{class:"stat-label"},"FunkcjonalnoÅ›ci")])])],-1),(0,s.Lk)("div",{class:"info-footer"},[(0,s.Lk)("p",null,"Â© 2025 PingMe - Platforma komunikacji"),(0,s.Lk)("p",null,[(0,s.eW)("Kontakt: "),(0,s.Lk)("a",{href:"mailto:kontakt@pingme.pl"},"kontakt@pingme.pl")])],-1)])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["friends"!==n.activeTab||n.selectedFriend?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",de,[(0,s.bF)(l,{currentUser:n.currentUser,onOpenChat:r.openChat},null,8,["currentUser","onOpenChat"])]))]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["events"===n.activeTab?((0,s.uX)(),(0,s.CE)("div",ce,[(0,s.bF)(d,{currentUser:n.currentUser},null,8,["currentUser"])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["gallery"===n.activeTab?((0,s.uX)(),(0,s.CE)("div",he,[(0,s.bF)(c,{currentUser:n.currentUser},null,8,["currentUser"])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-fade-in","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>["settings"===n.activeTab?((0,s.uX)(),(0,s.CE)("div",ue,[(0,s.bF)(h,{currentUser:n.currentUser,onCloseSettings:r.closeSettings,onAvatarChanged:r.updateAvatar,onAvatarColorChanged:r.handleAvatarColorChange,onThemeChanged:r.handleThemeChange,onTextSizeChanged:r.handleTextSizeChange},null,8,["currentUser","onCloseSettings","onAvatarChanged","onAvatarColorChanged","onThemeChanged","onTextSizeChanged"])])):(0,s.Q3)("",!0)]),_:1}),(0,s.bF)(i.eB,{"enter-active-class":"animate-slide-up","leave-active-class":"animate-fade-out"},{default:(0,s.k6)(()=>[n.selectedFriend?((0,s.uX)(),(0,s.CE)("div",pe,[(0,s.bF)(p,{currentUser:n.currentUser,friend:n.selectedFriend,onCloseChat:r.closeChat},null,8,["currentUser","friend","onCloseChat"])])):(0,s.Q3)("",!0)]),_:1})])]),n.mobileMenuOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,onClick:t[6]||(t[6]=e=>n.mobileMenuOpen=!1),class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden"})):(0,s.Q3)("",!0),(0,s.Lk)("footer",{class:(0,u.C4)(["fixed bottom-0 left-0 right-0 lg:left-72 p-4 backdrop-blur-lg border-t z-20",r.getCardClass()])},[(0,s.Lk)("div",ge,[(0,s.Lk)("a",{href:"mailto:kontakt@pingme.pl",class:(0,u.C4)(["flex items-center gap-2 text-sm hover:text-blue-500 transition-colors",r.getTextMutedClass()])},[...t[16]||(t[16]=[(0,s.Lk)("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1),(0,s.eW)(" kontakt@pingme.pl ",-1)])],2),(0,s.Lk)("div",me,[(0,s.Lk)("p",{class:(0,u.C4)(["text-xs",r.getTextMutedClass()])},"Â© 2025 PingMe. Wszelkie prawa zastrzeÅ¼one.",2),(0,s.Lk)("p",{class:(0,u.C4)(["text-xs font-mono",r.getTextMutedClass()])},"IP: "+(0,u.v_)(n.userIp),3)])])],2)],2)}const ve={class:"friends-container"},ye={class:"friends-panel"},fe={class:"panel-header"},be={key:0,class:"all-users-section"},Ce={key:0,class:"empty-state"},we={key:1,class:"users-list"},Le={class:"user-avatar"},Te={class:"user-info"},Ee={class:"user-name"},Me={class:"user-email"},xe=["onClick"],ze={key:1,class:"friend-badge"},Ie={class:"friends-section"},je={key:0,class:"empty-state"},Se={key:1,class:"friends-list"},Ue=["onClick"],De={class:"friend-avatar"},Fe={class:"friend-info"},Pe={class:"friend-name-section"},Ae={key:0,class:"nick-edit"},Xe=["onKeyup"],$e=["onClick"],_e=["onDblclick"],Ge={key:0},Oe={class:"real-username"},Ne={key:1},Be=["onClick"],Qe={key:0,class:"last-message"},Re={class:"message-text"},We={class:"message-meta"},Je={class:"message-time"},Ke={class:"message-date"},Ve={key:0,class:"read-status"},Ze={key:1,class:"last-message no-messages"},qe=["onClick"];function He(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("div",ve,[(0,s.Lk)("div",ye,[(0,s.Lk)("div",fe,[t[5]||(t[5]=(0,s.Lk)("h2",null,"ðŸ‘¥ Znajomi",-1)),(0,s.Lk)("button",{class:"add-btn",onClick:t[0]||(t[0]=e=>n.showAllUsers=!n.showAllUsers)},(0,u.v_)(n.showAllUsers?"âŒ Zamknij":"âž• Dodaj znajomego"),1)]),n.showAllUsers?((0,s.uX)(),(0,s.CE)("div",be,[t[6]||(t[6]=(0,s.Lk)("h3",null,"Wszyscy uÅ¼ytkownicy",-1)),0===n.allUsers.length?((0,s.uX)(),(0,s.CE)("div",Ce," Brak uÅ¼ytkownikÃ³w ")):((0,s.uX)(),(0,s.CE)("div",we,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.availableUsers,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"user-card"},[(0,s.Lk)("div",Le,(0,u.v_)(e.username.charAt(0).toUpperCase()),1),(0,s.Lk)("div",Te,[(0,s.Lk)("div",Ee,(0,u.v_)(e.username),1),(0,s.Lk)("div",Me,(0,u.v_)(e.email),1)]),r.isFriend(e.id)?((0,s.uX)(),(0,s.CE)("span",ze,"âœ“ Znajomy")):((0,s.uX)(),(0,s.CE)("button",{key:0,class:"add-friend-btn",onClick:t=>r.addFriend(e.id)}," âž• Dodaj ",8,xe))]))),128))]))])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ie,[(0,s.Lk)("h3",null,"Twoi znajomi ("+(0,u.v_)(n.friends.length)+")",1),0===n.friends.length?((0,s.uX)(),(0,s.CE)("div",je," Nie masz jeszcze znajomych. Dodaj kogoÅ›! ")):((0,s.uX)(),(0,s.CE)("div",Se,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.friendsWithMessages,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"friend-card",onClick:t=>r.startChat(e)},[(0,s.Lk)("div",De,(0,u.v_)(e.username.charAt(0).toUpperCase()),1),(0,s.Lk)("div",Fe,[(0,s.Lk)("div",Pe,[n.editingNickId===e.id?((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.editedNick=e),type:"text",placeholder:"Pseudonim",onKeyup:[(0,i.jR)(t=>r.saveNick(e.id),["enter"]),t[2]||(t[2]=(0,i.jR)((...e)=>r.cancelEditNick&&r.cancelEditNick(...e),["esc"]))],ref_for:!0,ref:"nickInput"},null,40,Xe),[[i.Jo,n.editedNick]]),(0,s.Lk)("button",{class:"save-nick-btn",onClick:(0,i.D$)(t=>r.saveNick(e.id),["stop"]),title:"Zapisz"},"âœ“",8,$e),(0,s.Lk)("button",{class:"cancel-nick-btn",onClick:t[3]||(t[3]=(0,i.D$)((...e)=>r.cancelEditNick&&r.cancelEditNick(...e),["stop"])),title:"Anuluj"},"âœ•")])):((0,s.uX)(),(0,s.CE)("div",{key:1,class:"friend-name",onDblclick:t=>r.startEditNick(e)},[e.nickname?((0,s.uX)(),(0,s.CE)("span",Ge,[(0,s.eW)((0,u.v_)(e.nickname)+" ",1),(0,s.Lk)("span",Oe,"("+(0,u.v_)(e.username)+")",1)])):((0,s.uX)(),(0,s.CE)("span",Ne,(0,u.v_)(e.username),1)),(0,s.Lk)("button",{class:"edit-nick-btn",onClick:(0,i.D$)(t=>r.startEditNick(e),["stop"]),title:"Edytuj pseudonim"},"âœï¸",8,Be)],40,_e))]),e.lastMessage?((0,s.uX)(),(0,s.CE)("div",Qe,[(0,s.Lk)("span",Re,(0,u.v_)(e.lastMessage.content),1),(0,s.Lk)("div",We,[(0,s.Lk)("span",Je,(0,u.v_)(r.formatTime(e.lastMessage.createdAt)),1),(0,s.Lk)("span",Ke,(0,u.v_)(r.formatDate(e.lastMessage.createdAt)),1),e.lastMessage.authorId!==a.currentUser.id?((0,s.uX)(),(0,s.CE)("span",Ve,(0,u.v_)(e.lastMessage.isRead?"âœ“âœ“":"âœ“"),1)):(0,s.Q3)("",!0)])])):((0,s.uX)(),(0,s.CE)("div",Ze," Brak wiadomoÅ›ci "))]),(0,s.Lk)("div",{class:"friend-actions",onClick:t[4]||(t[4]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("button",{class:"chat-btn",onClick:t=>r.startChat(e)},"ðŸ’¬ Czat",8,qe)])],8,Ue))),128))]))])])])}const Ye={name:"Friends",props:{currentUser:{type:Object,required:!0}},data(){return{friends:[],allUsers:[],conversations:[],showAllUsers:!1,editingNickId:null,editedNick:"",nicknames:JSON.parse(localStorage.getItem("friendNicknames")||"{}"),apiUrl:"http://localhost:8000/api"}},computed:{availableUsers(){return this.allUsers.filter(e=>e.id!==this.currentUser?.id)},friendsWithMessages(){return this.friends.map(e=>{const t=this.conversations.find(t=>t.participant.id===e.id);return{...e,nickname:this.nicknames[e.id]||null,...e,lastMessage:t?.lastMessage||null}})}},mounted(){this.loadFriends(),this.loadAllUsers(),this.loadConversations(),this.conversationInterval=setInterval(()=>{this.loadConversations()},3e3)},beforeUnmount(){this.conversationInterval&&clearInterval(this.conversationInterval)},methods:{async loadFriends(){try{const e=await fetch(`${this.apiUrl}/auth/users/${this.currentUser.id}/friends`);e.ok&&(this.friends=await e.json())}catch(e){console.error("Error loading friends:",e)}},async loadAllUsers(){try{const e=await fetch(`${this.apiUrl}/auth/users`);e.ok&&(this.allUsers=await e.json())}catch(e){console.error("Error loading users:",e)}},async loadConversations(){try{const e=await fetch(`${this.apiUrl}/conversations/${this.currentUser.id}`);e.ok&&(this.conversations=await e.json())}catch(e){console.error("Error loading conversations:",e)}},async addFriend(e){try{const t=await fetch(`${this.apiUrl}/auth/users/${e}/friends`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentUserId:this.currentUser.id})});t.ok&&(await this.loadFriends(),await this.loadAllUsers())}catch(t){console.error("Error adding friend:",t)}},isFriend(e){return this.friends.some(t=>t.id===e)},startChat(e){this.$emit("open-chat",e)},formatTime(e){if(!e)return"";const t=new Date(e);return`${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`},formatDate(e){if(!e)return"";const t=new Date(e),a=new Date,i=new Date(a);return i.setDate(i.getDate()-1),t.toDateString()===a.toDateString()?"Dzisiaj":t.toDateString()===i.toDateString()?"Wczoraj":`${t.getDate()}.${t.getMonth()+1}.${t.getFullYear()}`},startEditNick(e){this.editingNickId=e.id,this.editedNick=this.nicknames[e.id]||"",this.$nextTick(()=>{this.$refs.nickInput&&this.$refs.nickInput[0]&&this.$refs.nickInput[0].focus()})},saveNick(e){this.editedNick.trim()?this.nicknames[e]=this.editedNick.trim():delete this.nicknames[e],localStorage.setItem("friendNicknames",JSON.stringify(this.nicknames)),this.editingNickId=null,this.editedNick=""},cancelEditNick(){this.editingNickId=null,this.editedNick=""}}},et=(0,l.A)(Ye,[["render",He],["__scopeId","data-v-3e33149c"]]),tt=et,at={class:"events-container"},it={class:"events-panel"},st={class:"panel-header"},ot={key:0,class:"success-notification"},nt={key:1,class:"add-event-form"},rt={class:"form-row"},lt={class:"events-content"},dt={class:"calendar-section"},ct={class:"calendar-header"},ht={class:"calendar-grid"},ut=["onClick"],pt={class:"day-number"},gt={key:0,class:"event-dot"},mt={class:"events-list-section"},kt={key:0,class:"empty-state"},vt={key:1,class:"events-list"},yt={class:"event-header"},ft={class:"event-time"},bt={key:0,class:"event-description"},Ct={class:"event-meta"},wt={class:"event-author"},Lt=["onClick"],Tt={class:"todo-section"},Et={class:"todo-header"},Mt={key:0,class:"add-todo-form"},xt={class:"todo-list"},zt=["checked","onChange"],It=["onClick"],jt={key:0,class:"empty-state-small"};function St(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("div",at,[(0,s.Lk)("div",it,[(0,s.Lk)("div",st,[t[12]||(t[12]=(0,s.Lk)("h2",null,"ðŸ“… Wydarzenia",-1)),(0,s.Lk)("button",{class:"add-event-btn",onClick:t[0]||(t[0]=e=>n.showAddEventForm=!n.showAddEventForm)},(0,u.v_)(n.showAddEventForm?"âŒ Anuluj":"âž• Dodaj wydarzenie"),1)]),n.successMessage?((0,s.uX)(),(0,s.CE)("div",ot,(0,u.v_)(n.successMessage),1)):(0,s.Q3)("",!0),n.showAddEventForm?((0,s.uX)(),(0,s.CE)("div",nt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.newEvent.title=e),placeholder:"TytuÅ‚ wydarzenia"},null,512),[[i.Jo,n.newEvent.title]]),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.newEvent.description=e),placeholder:"Opis (opcjonalnie)"},null,512),[[i.Jo,n.newEvent.description]]),(0,s.Lk)("div",rt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.newEvent.date=e),type:"date"},null,512),[[i.Jo,n.newEvent.date]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.newEvent.time=e),type:"time"},null,512),[[i.Jo,n.newEvent.time]])]),(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.addEvent&&r.addEvent(...e)),class:"save-btn"},"Zapisz wydarzenie")])):(0,s.Q3)("",!0),(0,s.Lk)("div",lt,[(0,s.Lk)("div",dt,[(0,s.Lk)("div",ct,[(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.previousMonth&&r.previousMonth(...e)),class:"nav-btn"},"â®"),(0,s.Lk)("h3",null,(0,u.v_)(r.currentMonthYear),1),(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.nextMonth&&r.nextMonth(...e)),class:"nav-btn"},"â¯")]),(0,s.Lk)("div",ht,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.daysOfWeek,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"calendar-day-name"},(0,u.v_)(e),1))),128)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.calendarDays,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,u.C4)(["calendar-day",{"other-month":e.otherMonth,today:e.isToday,selected:e.date===n.selectedDate,"has-events":r.dayHasEvents(e.date)}]),onClick:t=>r.selectDate(e.date)},[(0,s.Lk)("span",pt,(0,u.v_)(e.day),1),r.dayHasEvents(e.date)?((0,s.uX)(),(0,s.CE)("span",gt)):(0,s.Q3)("",!0)],10,ut))),128))])]),(0,s.Lk)("div",mt,[(0,s.Lk)("h3",null,"Wydarzenia - "+(0,u.v_)(r.selectedDateFormatted),1),0===r.selectedDayEvents.length?((0,s.uX)(),(0,s.CE)("div",kt," Brak wydarzeÅ„ na ten dzieÅ„ ")):((0,s.uX)(),(0,s.CE)("div",vt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.selectedDayEvents,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"event-card"},[(0,s.Lk)("div",yt,[(0,s.Lk)("h4",null,(0,u.v_)(e.title),1),(0,s.Lk)("span",ft,(0,u.v_)(e.time),1)]),e.description?((0,s.uX)(),(0,s.CE)("p",bt,(0,u.v_)(e.description),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ct,[(0,s.Lk)("span",wt,(0,u.v_)(e.author.username),1),(0,s.Lk)("button",{onClick:t=>r.deleteEvent(e.id),class:"delete-btn"},"ðŸ—‘ï¸",8,Lt)])]))),128))]))]),(0,s.Lk)("div",Tt,[(0,s.Lk)("div",Et,[t[13]||(t[13]=(0,s.Lk)("h3",null,"ðŸ“ Rzeczy do zrobienia",-1)),(0,s.Lk)("button",{onClick:t[8]||(t[8]=e=>n.showAddTodoForm=!n.showAddTodoForm),class:"add-todo-btn"},"+")]),n.showAddTodoForm?((0,s.uX)(),(0,s.CE)("div",Mt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.newTodo=e),placeholder:"Nowe zadanie...",onKeyup:t[10]||(t[10]=(0,i.jR)((...e)=>r.addTodo&&r.addTodo(...e),["enter"]))},null,544),[[i.Jo,n.newTodo]]),(0,s.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>r.addTodo&&r.addTodo(...e))},"Dodaj")])):(0,s.Q3)("",!0),(0,s.Lk)("div",xt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.todos,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"todo-item"},[(0,s.Lk)("input",{type:"checkbox",checked:e.completed,onChange:t=>r.toggleTodo(e.id)},null,40,zt),(0,s.Lk)("span",{class:(0,u.C4)({completed:e.completed})},(0,u.v_)(e.text),3),(0,s.Lk)("button",{onClick:t=>r.deleteTodo(e.id),class:"delete-btn-small"},"Ã—",8,It)]))),128)),0===n.todos.length?((0,s.uX)(),(0,s.CE)("div",jt," Brak zadaÅ„ ")):(0,s.Q3)("",!0)])])])])])}const Ut={name:"Events",props:{currentUser:{type:Object,required:!0}},data(){return{currentDate:new Date,selectedDate:(new Date).toISOString().split("T")[0],events:[],todos:[],showAddEventForm:!1,showAddTodoForm:!1,newEvent:{title:"",description:"",date:(new Date).toISOString().split("T")[0],time:"12:00"},newTodo:"",daysOfWeek:["Pn","Wt","Åšr","Cz","Pt","Sb","Nd"],apiUrl:"http://localhost:8000/api",successMessage:""}},computed:{currentMonthYear(){return this.currentDate.toLocaleDateString("pl-PL",{month:"long",year:"numeric"})},selectedDateFormatted(){const[e,t,a]=this.selectedDate.split("-").map(Number),i=new Date(e,t-1,a);return i.toLocaleDateString("pl-PL",{day:"numeric",month:"long",year:"numeric"})},calendarDays(){const e=this.currentDate.getFullYear(),t=this.currentDate.getMonth(),a=new Date(e,t,1),i=new Date(e,t+1,0);let s=a.getDay()-1;-1===s&&(s=6);const o=[],n=(e,t,a)=>{const i=e.toString(),s=(t+1).toString().padStart(2,"0"),o=a.toString().padStart(2,"0");return`${i}-${s}-${o}`},r=new Date(e,t,0).getDate();for(let h=s-1;h>=0;h--){const a=r-h;o.push({day:a,date:n(e,t-1,a),otherMonth:!0,isToday:!1})}const l=new Date,d=n(l.getFullYear(),l.getMonth(),l.getDate());for(let h=1;h<=i.getDate();h++){const a=n(e,t,h);o.push({day:h,date:a,otherMonth:!1,isToday:a===d})}const c=42-o.length;for(let h=1;h<=c;h++)o.push({day:h,date:n(e,t+1,h),otherMonth:!0,isToday:!1});return o},selectedDayEvents(){return this.events.filter(e=>e.date===this.selectedDate)}},mounted(){this.loadEvents(),this.loadTodos()},methods:{previousMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1)},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1)},selectDate(e){this.selectedDate=e,this.newEvent.date=e},dayHasEvents(e){return this.events.some(t=>t.date===e)},async loadEvents(){try{const e=await fetch(`${this.apiUrl}/events`);e.ok&&(this.events=await e.json())}catch(e){console.error("Error loading events:",e)}},async addEvent(){if(this.newEvent.title.trim()){if(!this.currentUser||!this.currentUser.id)return alert("BÅ‚Ä…d: Brak zalogowanego uÅ¼ytkownika"),void console.error("currentUser:",this.currentUser);try{const e=await fetch(`${this.apiUrl}/events`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...this.newEvent,userId:this.currentUser.id})});if(e.ok)await this.loadEvents(),this.newEvent={title:"",description:"",date:(new Date).toISOString().split("T")[0],time:"12:00"},this.showAddEventForm=!1,this.successMessage="âœ“ Wydarzenie dodane pomyÅ›lnie!",setTimeout(()=>{this.successMessage=""},3e3);else{const t=await e.json();alert("BÅ‚Ä…d podczas dodawania wydarzenia: "+(t.error||"Nieznany bÅ‚Ä…d")),console.error("Response error:",t)}}catch(e){console.error("Error adding event:",e),alert("BÅ‚Ä…d poÅ‚Ä…czenia z serwerem")}}else alert("TytuÅ‚ wydarzenia jest wymagany")},async deleteEvent(e){try{const t=await fetch(`${this.apiUrl}/events/${e}`,{method:"DELETE"});t.ok&&await this.loadEvents()}catch(t){console.error("Error deleting event:",t)}},async loadTodos(){try{const e=await fetch(`${this.apiUrl}/todos/${this.currentUser.id}`);e.ok&&(this.todos=await e.json())}catch(e){console.error("Error loading todos:",e)}},async addTodo(){if(this.newTodo.trim())if(this.currentUser&&this.currentUser.id)try{const e=await fetch(`${this.apiUrl}/todos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:this.newTodo,userId:this.currentUser.id})});if(e.ok)await this.loadTodos(),this.newTodo="",this.showAddTodoForm=!1;else{const t=await e.json();alert("BÅ‚Ä…d podczas dodawania zadania: "+(t.error||"Nieznany bÅ‚Ä…d"))}}catch(e){console.error("Error adding todo:",e),alert("BÅ‚Ä…d poÅ‚Ä…czenia z serwerem")}else alert("BÅ‚Ä…d: Brak zalogowanego uÅ¼ytkownika");else alert("TreÅ›Ä‡ zadania jest wymagana")},async toggleTodo(e){try{const t=this.todos.find(t=>t.id===e),a=await fetch(`${this.apiUrl}/todos/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completed:!t.completed})});a.ok&&await this.loadTodos()}catch(t){console.error("Error toggling todo:",t)}},async deleteTodo(e){try{const t=await fetch(`${this.apiUrl}/todos/${e}`,{method:"DELETE"});t.ok&&await this.loadTodos()}catch(t){console.error("Error deleting todo:",t)}}}},Dt=(0,l.A)(Ut,[["render",St],["__scopeId","data-v-414c2800"]]),Ft=Dt,Pt={class:"gallery-container"},At={class:"gallery-header"},Xt={class:"modal-header"},$t={class:"modal-body"},_t={key:1,class:"upload-preview"},Gt=["src"],Ot={class:"caption-input"},Nt={class:"modal-actions"},Bt=["disabled"],Qt={class:"modal-header"},Rt={class:"modal-body"},Wt={class:"edit-tools"},Jt={class:"edit-canvas-container"},Kt={key:0,class:"draw-options"},Vt={key:1,class:"text-options"},Zt={class:"modal-actions"},qt={key:2,class:"loading"},Ht={key:3,class:"empty-state"},Yt={key:4,class:"photos-grid"},ea=["onClick"],ta=["src","alt"],aa={class:"photo-info"},ia={key:0,class:"caption-edit"},sa=["onKeyup","onBlur"],oa=["onClick"],na={class:"caption"},ra={class:"upload-date"},la={class:"photo-actions"},da=["onClick"],ca=["onClick"],ha=["src","alt"],ua={class:"photo-view-info"},pa={key:0,class:"caption"},ga={class:"date"};function ma(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("div",Pt,[(0,s.Lk)("div",At,[t[37]||(t[37]=(0,s.Lk)("h1",null,"ðŸ–¼ï¸ Galeria ZdjÄ™Ä‡",-1)),(0,s.Lk)("button",{class:"add-photo-btn",onClick:t[0]||(t[0]=e=>n.showUploadModal=!0)}," âž• Dodaj zdjÄ™cie ")]),n.showUploadModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[12]||(t[12]=(...e)=>r.closeUploadModal&&r.closeUploadModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:t[11]||(t[11]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",Xt,[t[38]||(t[38]=(0,s.Lk)("h2",null,"Dodaj nowe zdjÄ™cie",-1)),(0,s.Lk)("button",{class:"close-btn",onClick:t[1]||(t[1]=(...e)=>r.closeUploadModal&&r.closeUploadModal(...e))},"Ã—")]),(0,s.Lk)("div",$t,[(0,s.Lk)("div",{class:"upload-area",onDrop:t[5]||(t[5]=(...e)=>r.handleDrop&&r.handleDrop(...e)),onDragover:t[6]||(t[6]=(0,i.D$)(()=>{},["prevent"])),onDragleave:t[7]||(t[7]=(0,i.D$)(()=>{},["prevent"]))},[(0,s.Lk)("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:t[2]||(t[2]=(...e)=>r.handleFileSelect&&r.handleFileSelect(...e)),style:{display:"none"}},null,544),n.selectedFile?((0,s.uX)(),(0,s.CE)("div",_t,[(0,s.Lk)("img",{src:n.previewUrl,alt:"Preview"},null,8,Gt),(0,s.Lk)("button",{class:"remove-btn",onClick:t[4]||(t[4]=(...e)=>r.removeFile&&r.removeFile(...e))},"Ã—")])):((0,s.uX)(),(0,s.CE)("div",{key:0,class:"upload-placeholder",onClick:t[3]||(t[3]=t=>e.$refs.fileInput.click())},[...t[39]||(t[39]=[(0,s.Lk)("div",{class:"upload-icon"},"ðŸ“¸",-1),(0,s.Lk)("p",null,"Kliknij lub przeciÄ…gnij zdjÄ™cie",-1)])]))],32),(0,s.Lk)("div",Ot,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.newCaption=e),type:"text",placeholder:"Dodaj podpis (opcjonalne)",maxlength:"255"},null,512),[[i.Jo,n.newCaption]])]),(0,s.Lk)("div",Nt,[(0,s.Lk)("button",{class:"cancel-btn",onClick:t[9]||(t[9]=(...e)=>r.closeUploadModal&&r.closeUploadModal(...e))},"Anuluj"),(0,s.Lk)("button",{class:"upload-btn",onClick:t[10]||(t[10]=(...e)=>r.uploadPhoto&&r.uploadPhoto(...e)),disabled:!n.selectedFile||n.uploading},(0,u.v_)(n.uploading?"PrzesyÅ‚anie...":"PrzeÅ›lij"),9,Bt)])])])])):(0,s.Q3)("",!0),n.editingPhoto?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"modal-overlay",onClick:t[31]||(t[31]=(...e)=>r.closeEditModal&&r.closeEditModal(...e))},[(0,s.Lk)("div",{class:"modal-content edit-modal",onClick:t[30]||(t[30]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",Qt,[t[40]||(t[40]=(0,s.Lk)("h2",null,"Edytuj zdjÄ™cie",-1)),(0,s.Lk)("button",{class:"close-btn",onClick:t[13]||(t[13]=(...e)=>r.closeEditModal&&r.closeEditModal(...e))},"Ã—")]),(0,s.Lk)("div",Rt,[(0,s.Lk)("div",Wt,[(0,s.Lk)("button",{class:(0,u.C4)(["tool-btn",{active:"crop"===n.editMode}]),onClick:t[14]||(t[14]=e=>n.editMode="crop")}," âœ‚ï¸ Przytnij ",2),(0,s.Lk)("button",{class:(0,u.C4)(["tool-btn",{active:"draw"===n.editMode}]),onClick:t[15]||(t[15]=e=>n.editMode="draw")}," âœï¸ Rysuj ",2),(0,s.Lk)("button",{class:(0,u.C4)(["tool-btn",{active:"text"===n.editMode}]),onClick:t[16]||(t[16]=e=>n.editMode="text")}," ðŸ“ Tekst ",2),(0,s.Lk)("button",{class:"tool-btn",onClick:t[17]||(t[17]=(...e)=>r.resetEdit&&r.resetEdit(...e))}," ðŸ”„ Reset ")]),(0,s.Lk)("div",Jt,[(0,s.Lk)("canvas",{ref:"editCanvas",onMousedown:t[18]||(t[18]=(...e)=>r.startDrawing&&r.startDrawing(...e)),onMousemove:t[19]||(t[19]=(...e)=>r.draw&&r.draw(...e)),onMouseup:t[20]||(t[20]=(...e)=>r.stopDrawing&&r.stopDrawing(...e)),onMouseleave:t[21]||(t[21]=(...e)=>r.stopDrawing&&r.stopDrawing(...e))},null,544)]),"draw"===n.editMode?((0,s.uX)(),(0,s.CE)("div",Kt,[t[41]||(t[41]=(0,s.Lk)("label",null,"Kolor:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>n.drawColor=e),type:"color"},null,512),[[i.Jo,n.drawColor]]),t[42]||(t[42]=(0,s.Lk)("label",null,"GruboÅ›Ä‡:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>n.drawWidth=e),type:"range",min:"1",max:"20"},null,512),[[i.Jo,n.drawWidth]])])):(0,s.Q3)("",!0),"text"===n.editMode?((0,s.uX)(),(0,s.CE)("div",Vt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>n.textToAdd=e),type:"text",placeholder:"Wpisz tekst"},null,512),[[i.Jo,n.textToAdd]]),t[43]||(t[43]=(0,s.Lk)("label",null,"Kolor:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>n.textColor=e),type:"color"},null,512),[[i.Jo,n.textColor]]),t[44]||(t[44]=(0,s.Lk)("label",null,"Rozmiar:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>n.textSize=e),type:"range",min:"10",max:"100"},null,512),[[i.Jo,n.textSize]]),(0,s.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>r.addTextToCanvas&&r.addTextToCanvas(...e))},"Dodaj tekst")])):(0,s.Q3)("",!0),(0,s.Lk)("div",Zt,[(0,s.Lk)("button",{class:"cancel-btn",onClick:t[28]||(t[28]=(...e)=>r.closeEditModal&&r.closeEditModal(...e))},"Anuluj"),(0,s.Lk)("button",{class:"save-btn",onClick:t[29]||(t[29]=(...e)=>r.saveEditedPhoto&&r.saveEditedPhoto(...e))},"Zapisz")])])])])):(0,s.Q3)("",!0),n.loading?((0,s.uX)(),(0,s.CE)("div",qt,"Åadowanie zdjÄ™Ä‡...")):0===n.photos.length?((0,s.uX)(),(0,s.CE)("div",Ht,[t[45]||(t[45]=(0,s.Lk)("div",{class:"empty-icon"},"ðŸ“·",-1)),t[46]||(t[46]=(0,s.Lk)("p",null,"Brak zdjÄ™Ä‡ w galerii",-1)),(0,s.Lk)("button",{class:"add-first-btn",onClick:t[32]||(t[32]=e=>n.showUploadModal=!0)},"Dodaj pierwsze zdjÄ™cie")])):((0,s.uX)(),(0,s.CE)("div",Yt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.photos,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"photo-card"},[(0,s.Lk)("div",{class:"photo-wrapper",onClick:t=>r.openPhotoView(e)},[(0,s.Lk)("img",{src:e.url,alt:e.caption||"Photo"},null,8,ta)],8,ea),(0,s.Lk)("div",aa,[n.editingCaptionId===e.id?((0,s.uX)(),(0,s.CE)("div",ia,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>n.editedCaption=e),type:"text",onKeyup:(0,i.jR)(t=>r.saveCaption(e.id),["enter"]),onBlur:t=>r.saveCaption(e.id),ref_for:!0,ref:"captionInput"},null,40,sa),[[i.Jo,n.editedCaption]])])):((0,s.uX)(),(0,s.CE)("div",{key:1,class:"caption-display",onClick:t=>r.startEditCaption(e)},[(0,s.Lk)("p",na,(0,u.v_)(e.caption||"Kliknij aby dodaÄ‡ podpis"),1)],8,oa)),(0,s.Lk)("p",ra,(0,u.v_)(r.formatDate(e.uploadedAt)),1)]),(0,s.Lk)("div",la,[(0,s.Lk)("button",{class:"action-btn edit",onClick:t=>r.startEdit(e),title:"Edytuj"},"âœï¸",8,da),(0,s.Lk)("button",{class:"action-btn delete",onClick:t=>r.deletePhoto(e.id),title:"UsuÅ„"},"ðŸ—‘ï¸",8,ca)])]))),128))])),n.viewingPhoto?((0,s.uX)(),(0,s.CE)("div",{key:5,class:"modal-overlay",onClick:t[36]||(t[36]=e=>n.viewingPhoto=null)},[(0,s.Lk)("div",{class:"photo-view-modal",onClick:t[35]||(t[35]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("button",{class:"close-btn",onClick:t[34]||(t[34]=e=>n.viewingPhoto=null)},"Ã—"),(0,s.Lk)("img",{src:n.viewingPhoto.url,alt:n.viewingPhoto.caption},null,8,ha),(0,s.Lk)("div",ua,[n.viewingPhoto.caption?((0,s.uX)(),(0,s.CE)("p",pa,(0,u.v_)(n.viewingPhoto.caption),1)):(0,s.Q3)("",!0),(0,s.Lk)("p",ga,(0,u.v_)(r.formatDate(n.viewingPhoto.uploadedAt)),1)])])])):(0,s.Q3)("",!0)])}const ka={name:"Gallery",props:{currentUser:{type:Object,required:!0}},data(){return{photos:[],loading:!1,showUploadModal:!1,selectedFile:null,previewUrl:null,newCaption:"",uploading:!1,editingPhoto:null,editMode:"crop",drawColor:"#ff0000",drawWidth:5,textColor:"#ffffff",textSize:30,textToAdd:"",isDrawing:!1,lastX:0,lastY:0,editingCaptionId:null,editedCaption:"",viewingPhoto:null,apiUrl:"http://localhost:8000/api",originalImageData:null,editCanvas:null,editCtx:null}},mounted(){this.loadPhotos()},methods:{async loadPhotos(){this.loading=!0;try{const e=await fetch(`${this.apiUrl}/photos/${this.currentUser.id}`),t=await e.json();this.photos=Array.isArray(t)?t:[]}catch(e){console.error("Error loading photos:",e),alert("BÅ‚Ä…d podczas Å‚adowania zdjÄ™Ä‡")}finally{this.loading=!1}},handleFileSelect(e){const t=e.target.files[0];t&&this.processFile(t)},handleDrop(e){e.preventDefault();const t=e.dataTransfer.files[0];t&&t.type.startsWith("image/")&&this.processFile(t)},processFile(e){const t=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","video/mp4","video/quicktime","video/x-msvideo"];if(!t.includes(e.type.toLowerCase()))return alert(`NieprawidÅ‚owy typ pliku: ${e.type}. Dozwolone formaty: JPEG, JPG, PNG, GIF, WebP, BMP, MP4`),void console.error("Invalid file type:",e.type);const a=e.type.startsWith("video/")?52428800:10485760;if(e.size>a){const t=e.type.startsWith("video/")?"50MB":"10MB";return void alert(`Plik jest za duÅ¼y (max ${t})`)}console.log("File accepted:",e.name,e.type,e.size),this.selectedFile=e,this.previewUrl=URL.createObjectURL(e)},removeFile(){this.selectedFile=null,this.previewUrl=null,this.$refs.fileInput&&(this.$refs.fileInput.value="")},async uploadPhoto(){if(!this.selectedFile)return;this.uploading=!0,console.log("Uploading file:",this.selectedFile.name,this.selectedFile.type);const e=new FormData;e.append("file",this.selectedFile),e.append("userId",this.currentUser.id),e.append("caption",this.newCaption);try{const t=await fetch(`${this.apiUrl}/photos`,{method:"POST",body:e});if(t.ok)await this.loadPhotos(),this.closeUploadModal(),alert("ZdjÄ™cie dodane pomyÅ›lnie!");else{const e=await t.json();console.error("Upload failed:",e);let a="BÅ‚Ä…d: "+(e.error||"Nie udaÅ‚o siÄ™ przesÅ‚aÄ‡ zdjÄ™cia");e.receivedMimeType&&(a+=`\n\nTyp pliku: ${e.receivedMimeType}`,a+="\nAkceptowane typy: JPEG, PNG, GIF, WebP, BMP"),alert(a)}}catch(t){console.error("Upload error:",t),alert("BÅ‚Ä…d podczas przesyÅ‚ania zdjÄ™cia: "+t.message)}finally{this.uploading=!1}},closeUploadModal(){this.showUploadModal=!1,this.removeFile(),this.newCaption=""},startEdit(e){this.editingPhoto=e,this.editMode="crop",this.$nextTick(()=>{this.initEditCanvas(e.url)})},initEditCanvas(e){const t=this.$refs.editCanvas;if(!t)return void console.error("Canvas not found");this.editCanvas=t,this.editCtx=t.getContext("2d");const a=new Image;a.onerror=e=>{console.error("Error loading image:",e),alert("BÅ‚Ä…d podczas Å‚adowania zdjÄ™cia. SprÃ³buj ponownie.")},a.onload=()=>{const e=800,i=600;let s=a.width,o=a.height;s>e&&(o=o*e/s,s=e),o>i&&(s=s*i/o,o=i),t.width=s,t.height=o,this.editCtx.drawImage(a,0,0,s,o),this.originalImageData=this.editCtx.getImageData(0,0,s,o),console.log("Canvas initialized successfully",s,o)},e.startsWith("http")&&!e.includes(window.location.hostname)&&(a.crossOrigin="anonymous"),a.src=e},startDrawing(e){if("draw"!==this.editMode)return;this.isDrawing=!0;const t=this.editCanvas.getBoundingClientRect();this.lastX=e.clientX-t.left,this.lastY=e.clientY-t.top},draw(e){if(!this.isDrawing||"draw"!==this.editMode)return;const t=this.editCanvas.getBoundingClientRect(),a=e.clientX-t.left,i=e.clientY-t.top;this.editCtx.beginPath(),this.editCtx.moveTo(this.lastX,this.lastY),this.editCtx.lineTo(a,i),this.editCtx.strokeStyle=this.drawColor,this.editCtx.lineWidth=this.drawWidth,this.editCtx.lineCap="round",this.editCtx.stroke(),this.lastX=a,this.lastY=i},stopDrawing(){this.isDrawing=!1},addTextToCanvas(){this.textToAdd.trim()&&(this.editCtx.font=`${this.textSize}px Arial`,this.editCtx.fillStyle=this.textColor,this.editCtx.fillText(this.textToAdd,50,50),this.textToAdd="")},resetEdit(){this.originalImageData&&this.editCtx.putImageData(this.originalImageData,0,0)},async saveEditedPhoto(){this.editCanvas&&this.editCanvas.toBlob(async e=>{const t=new FormData;t.append("file",e,"edited.jpg"),t.append("userId",this.currentUser.id),t.append("caption",this.editingPhoto.caption||"");try{const e=await fetch(`${this.apiUrl}/photos`,{method:"POST",body:t});e.ok&&(await this.loadPhotos(),this.closeEditModal(),alert("ZdjÄ™cie zapisane!"))}catch(a){console.error("Save error:",a),alert("BÅ‚Ä…d podczas zapisywania")}},"image/jpeg",.9)},closeEditModal(){this.editingPhoto=null,this.editMode="crop"},startEditCaption(e){this.editingCaptionId=e.id,this.editedCaption=e.caption||"",this.$nextTick(()=>{this.$refs.captionInput&&this.$refs.captionInput[0]&&this.$refs.captionInput[0].focus()})},async saveCaption(e){try{const t=await fetch(`${this.apiUrl}/photos/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:this.editedCaption})});if(t.ok){const t=this.photos.find(t=>t.id===e);t&&(t.caption=this.editedCaption)}}catch(t){console.error("Error saving caption:",t)}finally{this.editingCaptionId=null,this.editedCaption=""}},async deletePhoto(e){if(confirm("Czy na pewno chcesz usunÄ…Ä‡ to zdjÄ™cie?"))try{const t=await fetch(`${this.apiUrl}/photos/${e}`,{method:"DELETE"});t.ok&&(this.photos=this.photos.filter(t=>t.id!==e),alert("ZdjÄ™cie usuniÄ™te"))}catch(t){console.error("Error deleting photo:",t),alert("BÅ‚Ä…d podczas usuwania zdjÄ™cia")}},openPhotoView(e){this.viewingPhoto=e},formatDate(e){const t=new Date(e);return t.toLocaleDateString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}}},va=(0,l.A)(ka,[["render",ma],["__scopeId","data-v-01fb4d9b"]]),ya=va,fa={class:"settings-container"},ba={class:"settings-panel"},Ca={class:"settings-header"},wa={class:"settings-content"},La={class:"settings-section"},Ta={class:"theme-grid"},Ea=["onClick"],Ma={class:"theme-name"},xa={key:0,class:"theme-check"},za={class:"settings-section"},Ia={class:"text-size-options"},ja=["onClick"],Sa={class:"settings-section"},Ua={class:"avatar-grid"},Da=["onClick"],Fa={class:"avatar-emoji"},Pa={key:0,class:"avatar-check"},Aa={class:"settings-section"},Xa={class:"color-grid"},$a=["onClick"],_a={key:0,class:"color-check"},Ga={class:"settings-section"},Oa={class:"user-details"},Na={class:"settings-section save-section"},Ba=["disabled"];function Qa(e,t,a,i,o,n){return(0,s.uX)(),(0,s.CE)("div",fa,[(0,s.Lk)("div",ba,[(0,s.Lk)("div",Ca,[(0,s.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("close-settings"))}," â† PowrÃ³t "),t[2]||(t[2]=(0,s.Lk)("h2",null,"âš™ï¸ Ustawienia",-1))]),(0,s.Lk)("div",wa,[(0,s.Lk)("div",La,[t[3]||(t[3]=(0,s.Lk)("h3",null,"ðŸŽ¨ Motyw",-1)),(0,s.Lk)("div",Ta,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.themes,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,u.C4)(["theme-card",{active:o.currentTheme===t}]),onClick:e=>n.changeTheme(t)},[(0,s.Lk)("div",{class:"theme-preview",style:(0,u.Tr)(n.getThemePreview(e))},null,4),(0,s.Lk)("span",Ma,(0,u.v_)(e.name),1),o.currentTheme===t?((0,s.uX)(),(0,s.CE)("span",xa,"âœ“")):(0,s.Q3)("",!0)],10,Ea))),128))])]),(0,s.Lk)("div",za,[t[4]||(t[4]=(0,s.Lk)("h3",null,"ðŸ“ Rozmiar tekstu",-1)),(0,s.Lk)("div",Ia,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.textSizes,e=>((0,s.uX)(),(0,s.CE)("button",{key:e.value,class:(0,u.C4)(["size-btn",{active:o.currentTextSize===e.value}]),onClick:t=>n.changeTextSize(e.value)},(0,u.v_)(e.label),11,ja))),128))]),(0,s.Lk)("div",{class:(0,u.C4)(["text-preview",n.getTextSizeClass(o.currentTextSize)])}," PrzykÅ‚adowy tekst wiadomoÅ›ci ",2)]),(0,s.Lk)("div",Sa,[t[5]||(t[5]=(0,s.Lk)("h3",null,"ðŸŽ­ Avatar",-1)),(0,s.Lk)("div",Ua,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.avatars,e=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,u.C4)(["avatar-option",{active:o.currentAvatar===e}]),onClick:t=>n.changeAvatar(e)},[(0,s.Lk)("span",Fa,(0,u.v_)(e),1),o.currentAvatar===e?((0,s.uX)(),(0,s.CE)("span",Pa,"âœ“")):(0,s.Q3)("",!0)],10,Da))),128))])]),(0,s.Lk)("div",Aa,[t[6]||(t[6]=(0,s.Lk)("h3",null,"ðŸŽ¨ Kolor tÅ‚a avatara",-1)),(0,s.Lk)("div",Xa,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.avatarColors,(e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:(0,u.C4)(["color-option",{active:o.currentAvatarColor===t}]),style:(0,u.Tr)({background:e.gradient}),onClick:e=>n.changeAvatarColor(t)},[o.currentAvatarColor===t?((0,s.uX)(),(0,s.CE)("span",_a,"âœ“")):(0,s.Q3)("",!0)],14,$a))),128))])]),(0,s.Lk)("div",Ga,[t[9]||(t[9]=(0,s.Lk)("h3",null,"ðŸ‘¤ Informacje o koncie",-1)),(0,s.Lk)("div",Oa,[(0,s.Lk)("p",null,[t[7]||(t[7]=(0,s.Lk)("strong",null,"Nazwa uÅ¼ytkownika:",-1)),(0,s.eW)(" "+(0,u.v_)(a.currentUser?.username),1)]),(0,s.Lk)("p",null,[t[8]||(t[8]=(0,s.Lk)("strong",null,"Email:",-1)),(0,s.eW)(" "+(0,u.v_)(a.currentUser?.email),1)])])]),(0,s.Lk)("div",Na,[(0,s.Lk)("button",{class:"save-btn",onClick:t[1]||(t[1]=(...e)=>n.saveSettings&&n.saveSettings(...e)),disabled:o.isSaving},(0,u.v_)(o.isSaving?"Zapisywanie...":"ðŸ’¾ Zapisz ustawienia"),9,Ba),o.saveMessage?((0,s.uX)(),(0,s.CE)("p",{key:0,class:(0,u.C4)(["save-message",o.saveMessageType])},(0,u.v_)(o.saveMessage),3)):(0,s.Q3)("",!0)])])])])}const Ra={name:"Settings",props:{currentUser:{type:Object,required:!0}},data(){return{themes:E,avatars:M,currentTheme:localStorage.getItem("theme")||"purpleDream",currentTextSize:localStorage.getItem("textSize")||"medium",currentAvatar:localStorage.getItem("userAvatar")||"ðŸ¦",currentAvatarColor:parseInt(localStorage.getItem("avatarBgColor")||"0"),textSizes:[{value:"small",label:"MaÅ‚y"},{value:"medium",label:"Åšredni"},{value:"large",label:"DuÅ¼y"}],avatarColors:[{name:"Niebieski-Fioletowy",gradient:"linear-gradient(to bottom right, #3b82f6, #8b5cf6)"},{name:"RÃ³Å¼owy-Czerwony",gradient:"linear-gradient(to bottom right, #ec4899, #ef4444)"},{name:"Zielony-Cyjan",gradient:"linear-gradient(to bottom right, #10b981, #06b6d4)"},{name:"PomaraÅ„czowy-Å»Ã³Å‚ty",gradient:"linear-gradient(to bottom right, #f97316, #eab308)"},{name:"Fioletowy-RÃ³Å¼owy",gradient:"linear-gradient(to bottom right, #a855f7, #ec4899)"},{name:"Czerwony-Fioletowy",gradient:"linear-gradient(to bottom right, #dc2626, #7c3aed)"},{name:"Cyjan-Niebieski",gradient:"linear-gradient(to bottom right, #06b6d4, #3b82f6)"}],isSaving:!1,saveMessage:"",saveMessageType:""}},mounted(){x(this.currentTheme),this.applyTextSize(this.currentTextSize)},methods:{getTextSizeClass:z,changeTheme(e){this.currentTheme=e,localStorage.setItem("theme",e),x(e),this.$emit("theme-changed",e)},changeTextSize(e){this.currentTextSize=e,localStorage.setItem("textSize",e),this.applyTextSize(e),this.$emit("text-size-changed",e)},applyTextSize(e){document.body.classList.remove("text-size-small","text-size-medium","text-size-large"),document.body.classList.add(z(e))},changeAvatar(e){this.currentAvatar=e,localStorage.setItem("userAvatar",e),this.$emit("avatar-changed",e)},changeAvatarColor(e){this.currentAvatarColor=e,localStorage.setItem("avatarBgColor",e.toString()),this.$emit("avatar-color-changed",e)},getThemePreview(e){return{background:`linear-gradient(135deg, ${e.colors.primary} 0%, ${e.colors.primaryDark} 100%)`}},async saveSettings(){this.isSaving=!0,this.saveMessage="",this.saveMessageType="",setTimeout(()=>{this.saveMessage="âœ“ Ustawienia zostaÅ‚y zapisane pomyÅ›lnie!",this.saveMessageType="success",this.isSaving=!1,setTimeout(()=>{this.saveMessage=""},3e3)},500)}}},Wa=(0,l.A)(Ra,[["render",Qa],["__scopeId","data-v-363061aa"]]),Ja=Wa,Ka={class:"chatroom-container"},Va={class:"chatroom-header"},Za={class:"chat-user-info"},qa={class:"chat-avatar"},Ha={class:"chat-username"},Ya={key:0},ei={class:"real-username"},ti={key:1},ai={class:"modal-header"},ii={class:"modal-body"},si={class:"color-section"},oi={class:"color-picker-row"},ni={class:"color-section"},ri={class:"color-picker-row"},li={class:"color-section"},di={class:"color-picker-row"},ci={class:"modal-actions"},hi={key:0,class:"drop-overlay"},ui={key:1,class:"empty-chat-message"},pi={key:0,class:"message-attachment"},gi=["src","alt","onClick"],mi={key:1,class:"message-attachment"},ki=["src"],vi={key:2,class:"message-attachment"},yi=["src"],fi={key:3,class:"edit-message-form"},bi=["onKeyup"],Ci=["onClick"],wi={key:4},Li={key:0},Ti={key:0,class:"edited-label"},Ei={key:1,class:"deleted-message"},Mi={key:5,class:"message-actions"},xi=["onClick"],zi=["onClick"],Ii=["onClick"],ji={class:"message-time"},Si={key:0,class:"active-reactions"},Ui=["onClick"],Di={key:1,class:"reactions-menu"},Fi=["onClick"],Pi={class:"input-area"},Ai={key:0,class:"attachment-menu"},Xi={key:1,class:"gif-picker"},$i={class:"gif-picker-header"},_i={key:0,class:"loading-gifs"},Gi={key:1,class:"gif-grid"},Oi=["src","alt","onClick"],Ni={key:2,class:"no-gifs"},Bi={key:2,class:"upload-progress"},Qi={key:3,class:"file-preview"},Ri=["src"],Wi=["src"],Ji=["disabled"],Ki=["src"];function Vi(e,t,a,o,n,r){return(0,s.uX)(),(0,s.CE)("div",Ka,[(0,s.Lk)("div",Va,[(0,s.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("close-chat"))}," â† PowrÃ³t "),(0,s.Lk)("div",Za,[(0,s.Lk)("div",qa,(0,u.v_)(a.friend.username.charAt(0).toUpperCase()),1),(0,s.Lk)("div",Ha,[r.friendNickname?((0,s.uX)(),(0,s.CE)("span",Ya,[(0,s.eW)((0,u.v_)(r.friendNickname)+" ",1),(0,s.Lk)("span",ei,"("+(0,u.v_)(a.friend.username)+")",1)])):((0,s.uX)(),(0,s.CE)("span",ti,(0,u.v_)(a.friend.username),1))])]),t[33]||(t[33]=(0,s.Lk)("div",{class:"header-spacer"},null,-1)),(0,s.Lk)("button",{class:"personalize-btn",onClick:t[1]||(t[1]=e=>n.showPersonalizeModal=!0),title:"Personalizuj czat"}," ðŸŽ¨ ")]),n.showPersonalizeModal?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:t[12]||(t[12]=(...e)=>r.closePersonalizeModal&&r.closePersonalizeModal(...e))},[(0,s.Lk)("div",{class:"personalize-modal",onClick:t[11]||(t[11]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("div",ai,[t[34]||(t[34]=(0,s.Lk)("h3",null,"ðŸŽ¨ Personalizacja czatu",-1)),(0,s.Lk)("button",{class:"modal-close-btn",onClick:t[2]||(t[2]=(...e)=>r.closePersonalizeModal&&r.closePersonalizeModal(...e))},"âœ•")]),(0,s.Lk)("div",ii,[(0,s.Lk)("div",si,[t[35]||(t[35]=(0,s.Lk)("label",null,"Kolor moich wiadomoÅ›ci:",-1)),(0,s.Lk)("div",oi,[(0,s.bo)((0,s.Lk)("input",{type:"color","onUpdate:modelValue":t[3]||(t[3]=e=>n.chatCustomization.myMessageColor=e)},null,512),[[i.Jo,n.chatCustomization.myMessageColor]]),(0,s.Lk)("span",{class:"color-preview",style:(0,u.Tr)({background:n.chatCustomization.myMessageColor})},null,4),(0,s.Lk)("button",{class:"reset-btn",onClick:t[4]||(t[4]=e=>r.resetColor("myMessageColor"))},"Resetuj")])]),(0,s.Lk)("div",ni,[t[36]||(t[36]=(0,s.Lk)("label",null,"Kolor wiadomoÅ›ci znajomego:",-1)),(0,s.Lk)("div",ri,[(0,s.bo)((0,s.Lk)("input",{type:"color","onUpdate:modelValue":t[5]||(t[5]=e=>n.chatCustomization.friendMessageColor=e)},null,512),[[i.Jo,n.chatCustomization.friendMessageColor]]),(0,s.Lk)("span",{class:"color-preview",style:(0,u.Tr)({background:n.chatCustomization.friendMessageColor})},null,4),(0,s.Lk)("button",{class:"reset-btn",onClick:t[6]||(t[6]=e=>r.resetColor("friendMessageColor"))},"Resetuj")])]),(0,s.Lk)("div",li,[t[37]||(t[37]=(0,s.Lk)("label",null,"Kolor tÅ‚a czatu:",-1)),(0,s.Lk)("div",di,[(0,s.bo)((0,s.Lk)("input",{type:"color","onUpdate:modelValue":t[7]||(t[7]=e=>n.chatCustomization.backgroundColor=e)},null,512),[[i.Jo,n.chatCustomization.backgroundColor]]),(0,s.Lk)("span",{class:"color-preview",style:(0,u.Tr)({background:n.chatCustomization.backgroundColor})},null,4),(0,s.Lk)("button",{class:"reset-btn",onClick:t[8]||(t[8]=e=>r.resetColor("backgroundColor"))},"Resetuj")])]),(0,s.Lk)("div",ci,[(0,s.Lk)("button",{class:"save-btn",onClick:t[9]||(t[9]=(...e)=>r.savePersonalization&&r.savePersonalization(...e))},"Zapisz"),(0,s.Lk)("button",{class:"cancel-btn",onClick:t[10]||(t[10]=(...e)=>r.closePersonalizeModal&&r.closePersonalizeModal(...e))},"Anuluj")])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,u.C4)(["chat-area",{"drag-over":n.isDragging}]),ref:"chatArea",onDrop:t[16]||(t[16]=(...e)=>r.handleDrop&&r.handleDrop(...e)),onDragover:t[17]||(t[17]=(...e)=>r.handleDragOver&&r.handleDragOver(...e)),onDragleave:t[18]||(t[18]=(...e)=>r.handleDragLeave&&r.handleDragLeave(...e)),style:(0,u.Tr)(r.getChatAreaStyle())},[n.isDragging?((0,s.uX)(),(0,s.CE)("div",hi," ðŸ“Ž UpuÅ›Ä‡ plik tutaj ")):(0,s.Q3)("",!0),0===n.messages.length?((0,s.uX)(),(0,s.CE)("div",ui," Brak wiadomoÅ›ci. Zacznij konwersacjÄ™! ")):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.messages,e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,u.C4)(["message",e.author?.id===a.currentUser.id?"sent":"received"])},[(0,s.Lk)("div",{class:"message-bubble",style:(0,u.Tr)(r.getMessageBubbleStyle(e.author?.id===a.currentUser.id))},["image"===e.attachmentType?((0,s.uX)(),(0,s.CE)("div",pi,[(0,s.Lk)("img",{src:e.attachmentUrl,alt:e.attachmentName,class:"attachment-image",onClick:t=>r.openImageModal(e.attachmentUrl)},null,8,gi)])):"video"===e.attachmentType?((0,s.uX)(),(0,s.CE)("div",mi,[(0,s.Lk)("video",{src:e.attachmentUrl,controls:"",class:"attachment-video"},null,8,ki)])):"gif"===e.attachmentType?((0,s.uX)(),(0,s.CE)("div",vi,[(0,s.Lk)("img",{src:e.attachmentUrl,alt:"GIF",class:"attachment-gif"},null,8,yi)])):(0,s.Q3)("",!0),n.editingMessageId===e.id?((0,s.uX)(),(0,s.CE)("div",fi,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.editMessageText=e),type:"text",onKeyup:[(0,i.jR)(t=>r.saveEdit(e.id),["enter"]),t[14]||(t[14]=(0,i.jR)((...e)=>r.cancelEdit&&r.cancelEdit(...e),["esc"]))],class:"edit-input",ref_for:!0,ref:"editInput"},null,40,bi),[[i.Jo,n.editMessageText]]),(0,s.Lk)("button",{onClick:t=>r.saveEdit(e.id),class:"save-edit-btn"},"âœ“",8,Ci),(0,s.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>r.cancelEdit&&r.cancelEdit(...e)),class:"cancel-edit-btn"},"âœ•")])):((0,s.uX)(),(0,s.CE)("div",wi,[e.content&&!e.deleted?((0,s.uX)(),(0,s.CE)("span",Li,[(0,s.eW)((0,u.v_)(e.content)+" ",1),e.edited?((0,s.uX)(),(0,s.CE)("span",Ti,"(edytowano)")):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),e.deleted?((0,s.uX)(),(0,s.CE)("span",Ei,"USUNIÄ˜TO")):(0,s.Q3)("",!0)])),e.author?.id!==a.currentUser.id||e.deleted?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Mi,[(0,s.Lk)("button",{class:"action-btn edit-btn",onClick:t=>r.startEdit(e),title:"Edytuj"}," âœï¸ ",8,xi),(0,s.Lk)("button",{class:"action-btn delete-btn",onClick:t=>r.deleteMessage(e.id),title:"UsuÅ„"}," ðŸ—‘ï¸ ",8,zi)])),(0,s.Lk)("button",{class:"reaction-toggle-btn",onClick:t=>r.toggleReactionMenu(e.id),title:"Dodaj reakcjÄ™"}," + ",8,Ii)],4),(0,s.Lk)("div",ji,(0,u.v_)(r.formatTime(e.createdAt)),1),r.hasActiveReactions(e)?((0,s.uX)(),(0,s.CE)("div",Si,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.reactionEmojis,(t,a)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("span",{key:a,class:"reaction-badge",onClick:t=>r.toggleReaction(e.id,a)},(0,u.v_)(t)+" "+(0,u.v_)(e.reactions[a]),9,Ui)),[[i.aG,e.reactions&&e.reactions[a]>0]])),128))])):(0,s.Q3)("",!0),n.openReactionMenuId===e.id?((0,s.uX)(),(0,s.CE)("div",Di,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.reactionEmojis,(t,a)=>((0,s.uX)(),(0,s.CE)("button",{key:a,class:(0,u.C4)(["reaction-btn",{active:e.reactions&&e.reactions[a]>0}]),onClick:t=>r.addReaction(e.id,a)},(0,u.v_)(t),11,Fi))),128))])):(0,s.Q3)("",!0)],2))),128))],38),(0,s.Lk)("div",Pi,[(0,s.Lk)("button",{class:"attachment-btn",onClick:t[19]||(t[19]=(...e)=>r.toggleAttachmentMenu&&r.toggleAttachmentMenu(...e)),title:"Dodaj zaÅ‚Ä…cznik"}," ðŸ“Ž "),n.showAttachmentMenu?((0,s.uX)(),(0,s.CE)("div",Ai,[(0,s.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>r.openFileDialog&&r.openFileDialog(...e)),class:"menu-item"}," ðŸ–¼ï¸ Obraz/Wideo "),(0,s.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>r.toggleGifPicker&&r.toggleGifPicker(...e)),class:"menu-item"}," ðŸ˜„ GIF ")])):(0,s.Q3)("",!0),(0,s.Lk)("input",{ref:"fileInput",type:"file",accept:"image/*,video/*",onChange:t[22]||(t[22]=(...e)=>r.handleFileSelect&&r.handleFileSelect(...e)),style:{display:"none"}},null,544),n.showGifPicker?((0,s.uX)(),(0,s.CE)("div",Xi,[(0,s.Lk)("div",$i,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>n.gifSearchQuery=e),type:"text",placeholder:"Szukaj GIFÃ³w...",onInput:t[24]||(t[24]=(...e)=>r.searchGifs&&r.searchGifs(...e)),class:"gif-search-input"},null,544),[[i.Jo,n.gifSearchQuery]]),(0,s.Lk)("button",{onClick:t[25]||(t[25]=e=>n.showGifPicker=!1),class:"close-btn"},"Ã—")]),n.loadingGifs?((0,s.uX)(),(0,s.CE)("div",_i,"Åadowanie...")):((0,s.uX)(),(0,s.CE)("div",Gi,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.displayedGifs,e=>((0,s.uX)(),(0,s.CE)("img",{key:e.id,src:e.url,alt:e.title,class:"gif-item",onClick:t=>r.sendGif(e.url)},null,8,Oi))),128))])),0!==r.displayedGifs.length||n.loadingGifs?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ni," Brak GIFÃ³w. Wpisz coÅ› w wyszukiwarkÄ™! "))])):(0,s.Q3)("",!0),n.uploadProgress>0&&n.uploadProgress<100?((0,s.uX)(),(0,s.CE)("div",Bi," PrzesyÅ‚anie: "+(0,u.v_)(n.uploadProgress)+"% ",1)):(0,s.Q3)("",!0),n.selectedFile?((0,s.uX)(),(0,s.CE)("div",Qi,["image"===n.selectedFileType?((0,s.uX)(),(0,s.CE)("img",{key:0,src:n.selectedFilePreview,alt:"Preview",class:"preview-image"},null,8,Ri)):"video"===n.selectedFileType?((0,s.uX)(),(0,s.CE)("video",{key:1,src:n.selectedFilePreview,class:"preview-video"},null,8,Wi)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>r.clearSelectedFile&&r.clearSelectedFile(...e)),class:"clear-btn"},"Ã—")])):(0,s.Q3)("",!0),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[27]||(t[27]=e=>n.newMessage=e),type:"text",placeholder:"Napisz wiadomoÅ›Ä‡...",onKeyup:t[28]||(t[28]=(0,i.jR)((...e)=>r.sendMessage&&r.sendMessage(...e),["enter"])),ref:"messageInput"},null,544),[[i.Jo,n.newMessage]]),(0,s.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>r.sendMessage&&r.sendMessage(...e)),disabled:n.isSending},(0,u.v_)(n.isSending?"â³":"WyÅ›lij"),9,Ji)]),n.showImageModal?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"image-modal",onClick:t[32]||(t[32]=(...e)=>r.closeImageModal&&r.closeImageModal(...e))},[(0,s.Lk)("div",{class:"modal-content",onClick:t[31]||(t[31]=(0,i.D$)(()=>{},["stop"]))},[(0,s.Lk)("img",{src:n.modalImageUrl,alt:"Full size image"},null,8,Ki),(0,s.Lk)("button",{class:"modal-close",onClick:t[30]||(t[30]=(...e)=>r.closeImageModal&&r.closeImageModal(...e))},"Ã—")])])):(0,s.Q3)("",!0)])}const Zi={name:"ChatRoom",props:{currentUser:{type:Object,required:!0},friend:{type:Object,required:!0}},data(){return{messages:[],newMessage:"",conversationId:null,openReactionMenuId:null,reactionEmojis:{heart:"â¤ï¸",like:"ðŸ‘",laugh:"ðŸ˜‚",wow:"ðŸ˜®"},apiUrl:"http://localhost:8000/api",showAttachmentMenu:!1,showGifPicker:!1,selectedFile:null,selectedFileType:null,selectedFilePreview:null,uploadProgress:0,isSending:!1,isDragging:!1,showImageModal:!1,modalImageUrl:"",gifSearchQuery:"",loadingGifs:!1,trendingGifs:[],searchedGifs:[],giphyApiKey:"sXpGFDGZs0Dv1mmNFvYaGUvYwKX0PWIh",searchTimeout:null,editingMessageId:null,editMessageText:"",isInitialLoad:!0,showPersonalizeModal:!1,chatCustomization:{myMessageColor:"#3b82f6",friendMessageColor:"#6b7280",backgroundColor:"transparent"},defaultColors:{myMessageColor:"#3b82f6",friendMessageColor:"#6b7280",backgroundColor:"transparent"}}},computed:{displayedGifs(){return this.gifSearchQuery?this.searchedGifs:this.trendingGifs},friendNickname(){const e=JSON.parse(localStorage.getItem("friendNicknames")||"{}");return e[this.friend.id]||null}},mounted(){this.initializeConversation(),this.loadTrendingGifs(),this.messageInterval=setInterval(()=>{this.loadMessages()},2e3),document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){this.messageInterval&&clearInterval(this.messageInterval),this.conversationId&&this.markConversationAsRead(),document.removeEventListener("click",this.handleClickOutside)},methods:{async initializeConversation(){try{this.isInitialLoad=!0;const e=`${this.apiUrl}/conversations/${this.currentUser.id}/with/${this.friend.id}`,t=await fetch(e),a=await t.json();this.conversationId=a.id,this.loadChatCustomization(),await this.loadMessages(),await this.markConversationAsRead()}catch(e){console.error("Error initializing conversation:",e)}},async loadMessages(){if(this.conversationId)try{const e=await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages`),t=await e.json(),a=Array.isArray(t)?t:[];a.forEach(e=>{if(e.attachmentUrl&&e.attachmentUrl.startsWith("/uploads/")){const t=this.apiUrl.replace("/api","");e.attachmentUrl=t+e.attachmentUrl}}),this.messages=a,this.$nextTick(()=>{(this.isInitialLoad||this.isUserAtBottom())&&(this.scrollToBottom(),this.isInitialLoad=!1)})}catch(e){console.error("Error loading messages:",e)}},async sendMessage(){if((this.newMessage.trim()||this.selectedFile)&&this.conversationId){this.isSending=!0;try{let e=null;this.selectedFile&&(e=await this.uploadFile(this.selectedFile));const t={content:this.newMessage,authorId:this.currentUser.id};e&&(t.attachmentType=e.attachmentType,t.attachmentUrl=e.attachmentUrl,t.attachmentName=e.attachmentName);const a=await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a.ok&&(this.newMessage="",this.clearSelectedFile(),await this.loadMessages(),this.$nextTick(()=>{this.scrollToBottom()}))}catch(e){console.error("Error sending message:",e),alert("BÅ‚Ä…d podczas wysyÅ‚ania wiadomoÅ›ci")}finally{this.isSending=!1}}},async uploadFile(e){const t=new FormData;t.append("file",e);try{const e=await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages/upload`,{method:"POST",body:t});if(e.ok){const t=await e.json();return t}throw new Error("Upload failed")}catch(a){throw console.error("Error uploading file:",a),a}},toggleAttachmentMenu(){this.showAttachmentMenu=!this.showAttachmentMenu,this.showAttachmentMenu&&(this.showGifPicker=!1)},openFileDialog(){this.$refs.fileInput.click(),this.showAttachmentMenu=!1},handleFileSelect(e){const t=e.target.files[0];if(!t)return;if(t.size>10485760)return void alert("Plik jest za duÅ¼y (max 10MB)");this.selectedFile=t,this.selectedFileType=t.type.startsWith("image/")?"image":"video";const a=new FileReader;a.onload=e=>{this.selectedFilePreview=e.target.result},a.readAsDataURL(t)},clearSelectedFile(){this.selectedFile=null,this.selectedFileType=null,this.selectedFilePreview=null,this.$refs.fileInput&&(this.$refs.fileInput.value="")},toggleGifPicker(){this.showGifPicker=!this.showGifPicker,this.showAttachmentMenu=!1,this.showGifPicker&&0===this.trendingGifs.length&&this.loadTrendingGifs()},async loadTrendingGifs(){this.loadingGifs=!0;try{const e=await fetch(`https://api.giphy.com/v1/gifs/trending?api_key=${this.giphyApiKey}&limit=30&rating=g`),t=await e.json();this.trendingGifs=t.data.map(e=>({id:e.id,url:e.images.fixed_height.url,title:e.title}))}catch(e){console.error("Error loading trending GIFs:",e),this.trendingGifs=[{id:1,url:"https://media.giphy.com/media/3oz8xAFtqoOUUrsh7W/giphy.gif",title:"Happy"},{id:2,url:"https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif",title:"Thumbs up"},{id:3,url:"https://media.giphy.com/media/g9582DNuQppxC/giphy.gif",title:"Laughing"},{id:4,url:"https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif",title:"Yes"},{id:5,url:"https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif",title:"No"},{id:6,url:"https://media.giphy.com/media/3o6Zt481isNVuQI1l6/giphy.gif",title:"Thinking"}]}finally{this.loadingGifs=!1}},searchGifs(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(async()=>{if(this.gifSearchQuery.trim()){this.loadingGifs=!0;try{const e=await fetch(`https://api.giphy.com/v1/gifs/search?api_key=${this.giphyApiKey}&q=${encodeURIComponent(this.gifSearchQuery)}&limit=30&rating=g`),t=await e.json();this.searchedGifs=t.data.map(e=>({id:e.id,url:e.images.fixed_height.url,title:e.title}))}catch(e){console.error("Error searching GIFs:",e),this.searchedGifs=[]}finally{this.loadingGifs=!1}}else this.searchedGifs=[]},500)},async sendGif(e){if(this.conversationId){this.isSending=!0;try{const t=await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:this.newMessage||"",authorId:this.currentUser.id,attachmentType:"gif",attachmentUrl:e,attachmentName:"GIF"})});t.ok&&(this.newMessage="",this.showGifPicker=!1,await this.loadMessages())}catch(t){console.error("Error sending GIF:",t),alert("BÅ‚Ä…d podczas wysyÅ‚ania GIF")}finally{this.isSending=!1}}},handleDragOver(e){e.preventDefault(),this.isDragging=!0},handleDragLeave(e){e.preventDefault(),this.isDragging=!1},handleDrop(e){e.preventDefault(),this.isDragging=!1;const t=e.dataTransfer.files;if(t.length>0){const e=t[0];if(e.type.startsWith("image/")||e.type.startsWith("video/")){const t=new DataTransfer;t.items.add(e),this.$refs.fileInput&&(this.$refs.fileInput.files=t.files,this.handleFileSelect({target:{files:t.files}}))}else alert("ObsÅ‚ugiwane sÄ… tylko pliki obrazÃ³w i wideo")}},openImageModal(e){this.modalImageUrl=e,this.showImageModal=!0},closeImageModal(){this.showImageModal=!1,this.modalImageUrl=""},startEdit(e){this.editingMessageId=e.id,this.editMessageText=e.content,this.$nextTick(()=>{this.$refs.editInput&&this.$refs.editInput.focus()})},saveEdit(e){const t=this.messages.find(t=>t.id===e);t&&(t.content=this.editMessageText,t.edited=!0),this.editingMessageId=null,this.editMessageText=""},cancelEdit(){this.editingMessageId=null,this.editMessageText=""},deleteMessage(e){const t=this.messages.find(t=>t.id===e);t&&(t.deleted=!0,t.content="")},toggleReactionMenu(e){event.stopPropagation(),this.openReactionMenuId===e?this.openReactionMenuId=null:this.openReactionMenuId=e},handleClickOutside(e){const t=e.target.closest(".reactions-menu"),a=e.target.closest(".reaction-toggle-btn");t||a||(this.openReactionMenuId=null)},hasActiveReactions(e){return!!e.reactions&&Object.values(e.reactions).some(e=>e>0)},async addReaction(e,t){await this.toggleReaction(e,t),this.openReactionMenuId=null},async toggleReaction(e,t){if(this.conversationId)try{const a=await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages/${e}/reaction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t})});a.ok&&await this.loadMessages()}catch(a){console.error("Error adding reaction:",a)}},async markConversationAsRead(){if(this.conversationId)try{await fetch(`${this.apiUrl}/conversations/${this.conversationId}/messages/mark-read`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.currentUser.id})})}catch(e){console.error("Error marking messages as read:",e)}},formatTime(e){if(!e)return"";const t=new Date(e),a=new Date,i=a-t,s=Math.floor(i/6e4),o=(Math.floor(i/36e5),Math.floor(i/864e5));return 0===o?s<1?"teraz":s<60?`${s} min temu`:`${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`:1===o?`wczoraj ${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`:`${t.getDate()}.${t.getMonth()+1} ${t.getHours()}:${String(t.getMinutes()).padStart(2,"0")}`},isUserAtBottom(){const e=this.$refs.chatArea;if(!e)return!0;const t=100,a=e.scrollTop+e.clientHeight,i=e.scrollHeight;return a>=i-t},scrollToBottom(){const e=this.$refs.chatArea;e&&(e.scrollTop=e.scrollHeight)},loadChatCustomization(){const e=`chat_customization_${this.conversationId}`,t=localStorage.getItem(e);this.chatCustomization=t?JSON.parse(t):{...this.defaultColors}},savePersonalization(){const e=`chat_customization_${this.conversationId}`;localStorage.setItem(e,JSON.stringify(this.chatCustomization)),this.showPersonalizeModal=!1},resetColor(e){this.chatCustomization[e]=this.defaultColors[e]},closePersonalizeModal(){this.showPersonalizeModal=!1,this.loadChatCustomization()},getMessageBubbleStyle(e){return e?{backgroundColor:this.chatCustomization.myMessageColor}:{backgroundColor:this.chatCustomization.friendMessageColor}},getChatAreaStyle(){return"transparent"!==this.chatCustomization.backgroundColor?{backgroundColor:this.chatCustomization.backgroundColor}:{}}}},qi=(0,l.A)(Zi,[["render",Vi],["__scopeId","data-v-25c65672"]]),Hi=qi,Yi={name:"Dashboard",components:{Friends:tt,Events:Ft,Gallery:ya,Settings:Ja,ChatRoom:Hi},data(){return{currentUser:null,activeTab:"home",selectedFriend:null,userAvatar:"ðŸ¦",currentTheme:"darkModern",currentAvatarColor:0,mobileMenuOpen:!1,currentTime:"",currentDate:"",userIp:"",apiUrl:"http://localhost:8000/api",tabs:[{id:"home",icon:"ðŸ ",label:"Strona gÅ‚Ã³wna",badge:null},{id:"friends",icon:"ðŸ‘¥",label:"Znajomi",badge:null},{id:"events",icon:"ðŸ“…",label:"Wydarzenia",badge:null},{id:"gallery",icon:"ðŸ–¼ï¸",label:"Galeria",badge:null},{id:"settings",icon:"âš™ï¸",label:"Ustawienia",badge:null},{id:"info",icon:"â„¹ï¸",label:"Informacje",badge:null}],avatarColors:["linear-gradient(to bottom right, #3b82f6, #8b5cf6)","linear-gradient(to bottom right, #ec4899, #ef4444)","linear-gradient(to bottom right, #10b981, #06b6d4)","linear-gradient(to bottom right, #f97316, #eab308)","linear-gradient(to bottom right, #a855f7, #ec4899)","linear-gradient(to bottom right, #dc2626, #7c3aed)","linear-gradient(to bottom right, #06b6d4, #3b82f6)"]}},async mounted(){const e=localStorage.getItem("user");if(!e)return void this.$router.push("/");await this.checkIpAndSession(),this.currentUser=JSON.parse(e);const t=localStorage.getItem("userAvatar");t&&(this.userAvatar=t);const a=localStorage.getItem("avatarBgColor");a&&(this.currentAvatarColor=parseInt(a));const i=localStorage.getItem("theme")||"darkModern";this.currentTheme=i,x(i);const s=localStorage.getItem("textSize")||"medium";document.body.classList.add(z(s)),this.updateClock(),this.clockInterval=setInterval(this.updateClock,1e3),this.inactivityInterval=setInterval(this.checkInactivity,6e4),this.setupActivityTracking()},beforeUnmount(){this.clockInterval&&clearInterval(this.clockInterval),this.inactivityInterval&&clearInterval(this.inactivityInterval),document.removeEventListener("mousemove",this.updateActivity),document.removeEventListener("keypress",this.updateActivity),document.removeEventListener("click",this.updateActivity)},methods:{updateClock(){const e=new Date;this.currentTime=e.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.currentDate=e.toLocaleDateString("pl-PL",{weekday:"short",year:"numeric",month:"long",day:"numeric"})},switchTab(e){this.activeTab=e,this.selectedFriend=null,this.mobileMenuOpen=!1},openChat(e){this.selectedFriend=e,this.activeTab="friends",this.mobileMenuOpen=!1},closeChat(){this.selectedFriend=null},closeSettings(){this.activeTab="friends"},handleLogout(){localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push("/")},updateAvatar(e){this.userAvatar=e,localStorage.setItem("userAvatar",e)},handleAvatarColorChange(e){this.currentAvatarColor=e,localStorage.setItem("avatarBgColor",e.toString())},handleThemeChange(e){this.currentTheme=e,x(e)},handleTextSizeChange(e){document.body.classList.remove("text-sm","text-base","text-lg"),document.body.classList.add(z(e))},getAvatarBgStyle(){return{background:this.avatarColors[this.currentAvatarColor]}},getBgClass(){return"feminine"===this.currentTheme?"bg-pink-50":"darkFeminine"===this.currentTheme?"bg-gradient-to-br from-purple-950 via-pink-950 to-purple-900":"lightModern"===this.currentTheme?"bg-gray-50":"bg-slate-900"},getCardClass(){return"feminine"===this.currentTheme?"bg-white/90 border-pink-200":"darkFeminine"===this.currentTheme?"bg-purple-950/90 border-pink-500/30":"lightModern"===this.currentTheme?"bg-white/90 border-gray-200":"bg-slate-800/90 border-slate-700"},getBorderClass(){return"feminine"===this.currentTheme?"border-pink-200":"darkFeminine"===this.currentTheme?"border-pink-500/30":"lightModern"===this.currentTheme?"border-gray-200":"border-slate-700"},getTextClass(){return"feminine"===this.currentTheme?"text-pink-900":"darkFeminine"===this.currentTheme?"text-pink-100":"lightModern"===this.currentTheme?"text-gray-900":"text-slate-100"},getTextMutedClass(){return"feminine"===this.currentTheme?"text-pink-600":"darkFeminine"===this.currentTheme?"text-pink-300":"lightModern"===this.currentTheme?"text-gray-600":"text-slate-400"},getHoverClass(){return"feminine"===this.currentTheme?"hover:bg-pink-100":"darkFeminine"===this.currentTheme?"hover:bg-pink-900/30":"lightModern"===this.currentTheme?"hover:bg-gray-100":"hover:bg-slate-700"},getActiveNavClass(){return"feminine"===this.currentTheme?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg shadow-pink-500/50":"darkFeminine"===this.currentTheme?"bg-gradient-to-r from-pink-600 to-purple-600 text-white shadow-lg shadow-pink-500/50":(this.currentTheme,"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg shadow-blue-500/50")},getInactiveNavClass(){return"feminine"===this.currentTheme?"text-pink-700 hover:bg-pink-100":"darkFeminine"===this.currentTheme?"text-pink-200 hover:bg-pink-900/30":"lightModern"===this.currentTheme?"text-gray-700 hover:bg-gray-100":"text-slate-300 hover:bg-slate-700"},getLogoutButtonClass(){return"feminine"===this.currentTheme?"bg-pink-100 text-pink-700 hover:bg-pink-200":"darkFeminine"===this.currentTheme?"bg-pink-900/50 text-pink-200 hover:bg-pink-800/50":"lightModern"===this.currentTheme?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-slate-700 text-slate-300 hover:bg-slate-600"},getLogoBgClass(){return"feminine"===this.currentTheme?"bg-pink-50":"darkFeminine"===this.currentTheme?"bg-gradient-to-br from-purple-900 to-pink-900":"lightModern"===this.currentTheme?"bg-gray-50":"bg-slate-800"},getLogoTextClass(){return"feminine"===this.currentTheme?"text-pink-700":"darkFeminine"===this.currentTheme?"text-pink-200":"lightModern"===this.currentTheme?"text-gray-800":"text-slate-100"},async checkIpAndSession(){try{const e=await fetch(`${this.apiUrl}/auth/ip`),t=await e.json();this.userIp=t.ip;const a=localStorage.getItem("userIp");if(a&&a!==t.ip)return alert("Twoje IP ulegÅ‚o zmianie. Musisz siÄ™ zalogowaÄ‡ ponownie."),void this.handleLogout();a||localStorage.setItem("userIp",t.ip)}catch(e){console.error("Error checking IP:",e)}},checkInactivity(){const e=localStorage.getItem("lastActivity");if(!e)return;const t=new Date,a=new Date(e),i=(t-a)/6e4;i>=15&&(alert("Sesja wygasÅ‚a z powodu braku aktywnoÅ›ci. Zaloguj siÄ™ ponownie."),this.handleLogout())},setupActivityTracking(){this.updateActivity=()=>{localStorage.setItem("lastActivity",(new Date).toISOString())},document.addEventListener("mousemove",this.updateActivity),document.addEventListener("keypress",this.updateActivity),document.addEventListener("click",this.updateActivity)}}},es=(0,l.A)(Yi,[["render",ke],["__scopeId","data-v-512b1573"]]),ts=es,as=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:S},{path:"/register",name:"Register",component:R},{path:"/dashboard",name:"Dashboard",component:ts,meta:{requiresAuth:!0}}],is=(0,h.aE)({history:(0,h.LA)(),routes:as});is.beforeEach((e,t,a)=>{const i=localStorage.getItem("user");e.meta.requiresAuth&&!i?a("/login"):"/login"!==e.path&&"/register"!==e.path||!i?a():a("/dashboard")});const ss=is,os=(0,i.Ef)(c);os.use(ss),os.mount("#app")}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,a),o.exports}a.m=e,(()=>{var e=[];a.O=(t,i,s,o)=>{if(!i){var n=1/0;for(c=0;c<e.length;c++){for(var[i,s,o]=e[c],r=!0,l=0;l<i.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every(e=>a.O[e](i[l]))?i.splice(l--,1):(r=!1,o<n&&(n=o));if(r){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,s,o]}})(),(()=>{a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var s,o,[n,r,l]=i,d=0;if(n.some(t=>0!==e[t])){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(l)var c=l(a)}for(t&&t(i);d<n.length;d++)o=n[d],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},i=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=a.O(void 0,[504],()=>a(30));i=a.O(i)})();
//# sourceMappingURL=app.354b8751.js.map